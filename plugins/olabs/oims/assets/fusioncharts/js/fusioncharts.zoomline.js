(function(factory){if(typeof module==="object"&&typeof module.exports!=="undefined"){module.exports=factory}else{factory()}})(function(){if(arguments.length){setTimeout(function(){throw new Error("A deprecated way of resolving FusionCharts as a dependency is detected. Please use FusionCharts.addDep instead. For more information, please visit https://www.fusioncharts.com/dev/getting-started/plain-javascript/install-using-plain-javascript#install-fusioncharts-via-npm-5")},0)}(window["webpackJsonpFusionCharts"]=window["webpackJsonpFusionCharts"]||[]).push([[5],{692:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.ZoomLineDY=exports.ZoomLine=undefined;var _zoomline=__webpack_require__(693);var _zoomline2=_interopRequireDefault(_zoomline);var _zoomlinedy=__webpack_require__(697);var _zoomlinedy2=_interopRequireDefault(_zoomlinedy);var _crosslineZoomline=__webpack_require__(699);var _crosslineZoomline2=_interopRequireDefault(_crosslineZoomline);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.ZoomLine=_zoomline2["default"];exports.ZoomLineDY=_zoomlinedy2["default"];exports["default"]={name:"zoomline",type:"package",requiresFusionCharts:true,extension:function extension(FusionCharts){FusionCharts.addDep(_crosslineZoomline2["default"]);FusionCharts.addDep(_zoomline2["default"]);FusionCharts.addDep(_zoomlinedy2["default"])}}},693:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _lib=__webpack_require__(118);var _libGraphics=__webpack_require__(122);var _msline=__webpack_require__(457);var _msline2=_interopRequireDefault(_msline);var _zoomline=__webpack_require__(694);var _zoomline2=_interopRequireDefault(_zoomline);var _zoomlineDataset=__webpack_require__(696);var _zoomlineDataset2=_interopRequireDefault(_zoomlineDataset);var _schedular=__webpack_require__(129);var _scrollApis=__webpack_require__(405);var _iconsymbol=__webpack_require__(426);var _dependencyManager=__webpack_require__(125);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass)}var userAgent=window.navigator.userAgent,Raphael=(0,_dependencyManager.getDep)("redraphael","plugin"),doc=window.doc,isIE=/msie/i.test(userAgent)&&!window.opera,TRACKER_FILL="rgba(192,192,192,"+(isIE?.002:1e-6)+")",toFloat=window.parseFloat,PIPE="|",PX="px",toInt=window.parseInt,BLANK="",math=Math,mathMax=math.max,mathMin=math.min,mathCeil=math.ceil,mathFloor=math.floor,count=0,fireMouseEvent=function fireMouseEvent(eventName,domElement,mouseEventInit){var event;if(!domElement||!eventName){return}if(!mouseEventInit){mouseEventInit={}}if(mouseEventInit.originalEvent){mouseEventInit=mouseEventInit.originalEvent}if(mouseEventInit.touches){mouseEventInit=mouseEventInit.touches[0]}if(domElement.dispatchEvent){if(MouseEvent){event=new MouseEvent(eventName,{bubbles:!!mouseEventInit.bubbles,cancelable:!!mouseEventInit.cancelable,clientX:mouseEventInit.clientX||mouseEventInit.pageX&&mouseEventInit.pageX-doc.body.scrollLeft-doc.documentElement.scrollLeft||0,clientY:mouseEventInit.clientY||mouseEventInit.pageY&&mouseEventInit.pageY-doc.body.scrollTop-doc.documentElement.scrollTop||0,screenX:mouseEventInit.screenX||0,screenY:mouseEventInit.screenY||0,pageX:mouseEventInit.pageX||0,pageY:mouseEventInit.pageY||0})}else if(doc.createEvent){event=doc.createEvent("HTMLEvents");event.initEvent(eventName,!!mouseEventInit.bubbles,!!mouseEventInit.cancelable)}event.eventName=eventName;event&&domElement.dispatchEvent(event)}else if(doc.createEventObject&&domElement.fireEvent){event=doc.createEventObject();event.eventType=eventName;event.eventName=eventName;domElement.fireEvent("on"+eventName,event)}},_isWithinCanvas=function _isWithinCanvas(e,chart){var chartConfig=chart.get("config"),mousePos=(0,_lib.getMouseCoordinate)(chart.get("linkedItems","container"),e,chart),chartX=mousePos.chartX,chartY=mousePos.chartY,minX=chartConfig.canvasLeft,minY=chartConfig.canvasTop,maxX=chartConfig.canvasLeft+chartConfig.canvasWidth,maxY=chartConfig.canvasHeight+chartConfig.canvasTop;mousePos.insideCanvas=false;mousePos.originalEvent=e;if(chartX>minX&&chartX<maxX&&chartY>minY&&chartY<maxY){mousePos.insideCanvas=true}return mousePos};Raphael.addSymbol(_iconsymbol.symbolList);var ZoomLine=function(_MSLine){_inherits(ZoomLine,_MSLine);ZoomLine.getName=function getName(){return"ZoomLine"};ZoomLine.includeInputOptions=function includeInputOptions(){return["DragZoomIn","DragPin","ZoomResetButton","ZoomOutButton"]};function ZoomLine(){_classCallCheck(this,ZoomLine);var _this=_possibleConstructorReturn(this,_MSLine.call(this));_this.canvasborderthickness=1;_this.zoomX=true;_this.hasScroll=true;_this.eiMethods={zoomOut:function zoomOut(callback){var chart=this.apiInstance,canvas=chart.getChildren&&chart.getChildren("canvas")[0],inputManager=canvas&&canvas.getChildren("inputManager"),output;inputManager=inputManager&&inputManager[0];if(!chart||!inputManager){return}chart.addJob("zoomOut"+count++,function(){output=inputManager.zoomOut();if(typeof callback==="function"){callback(output)}},_schedular.priorityList.postRender)},zoomTo:function zoomTo(startIndex,endIndex,callback){var chartInstance=this,chart=chartInstance.apiInstance,canvas=chart.getChildren&&chart.getChildren("canvas")[0],inputManager=canvas&&canvas.getChildren("inputManager"),output;if(startIndex===undefined||endIndex===undefined){return}inputManager=inputManager&&inputManager[0];if(!chart||!inputManager){return}if(callback){chart.addJob("zoomTo"+count++,function(){output=inputManager.zoomTo(startIndex,endIndex);if(typeof callback==="function"){callback(output)}},_schedular.priorityList.postRender)}else{return inputManager.zoomTo(startIndex,endIndex)}},resetChart:function resetChart(){var chart=this.apiInstance,canvas=chart.getChildren&&chart.getChildren("canvas")[0],inputManager=canvas&&canvas.getChildren("inputManager"),_helperFn=function _helperFn(){inputManager.resetChart()};inputManager=inputManager&&inputManager[0];if(!chart||!inputManager){return}chart.addJob("resetChart"+count++,_helperFn,_schedular.priorityList.postRender)},setZoomMode:function setZoomMode(yes){var chart=this.apiInstance,canvas=chart.getChildren&&chart.getChildren("canvas")[0],inputManager=canvas&&canvas.getChildren("inputManager");inputManager=inputManager&&inputManager[0];if(!chart||!inputManager){return}chart.addJob("setZoomMode"+count++,function(){inputManager.setZoomMode(yes)},_schedular.priorityList.postRender)},getViewStartIndex:function getViewStartIndex(callback){var chart=this.apiInstance,axis,minValue,startIndex;if(callback){chart.addJob("getViewStartIndex"+count++,function(){if(typeof callback==="function"){axis=chart.getChildren("xAxis")[0];minValue=axis.getVisibleConfig().minValue;startIndex=Math.ceil(minValue);callback(startIndex===0?0:startIndex)}},_schedular.priorityList.postRender)}else{axis=chart.getChildren("xAxis")[0];minValue=axis.getVisibleConfig().minValue;startIndex=Math.ceil(minValue);return startIndex===0?0:startIndex}},getViewEndIndex:function getViewEndIndex(callback){var chart=this.apiInstance,axis,maxValue;if(callback){chart.addJob("getViewEndIndex"+count++,function(){if(typeof callback==="function"){axis=chart.getChildren("xAxis")[0];maxValue=axis.getVisibleConfig().maxValue;callback(Math.floor(maxValue))}},_schedular.priorityList.postRender)}else{axis=chart.getChildren("xAxis")[0];maxValue=axis.getVisibleConfig().maxValue;return Math.floor(maxValue)}}};_this.eiMethods.scrollTo=_scrollApis.scrollTo;_this.registerFactory("dataset",_zoomlineDataset2["default"],["vCanvas"]);return _this}ZoomLine.prototype.__setDefaultConfig=function __setDefaultConfig(){_MSLine.prototype.__setDefaultConfig.call(this);var config=this.config;config.friendlyName="Zoomable and Panable Multi-series Line Chart";config.defaultDatasetType="zoomline";config.showValues=0;config.zeroplanethickness=1;config.zeroplanealpha=40;config.showzeroplaneontop=0;config.enablemousetracking=true;config.skipAttr=true;config.showvalues=0};ZoomLine.prototype.getName=function getName(){return"ZoomLine"};ZoomLine.prototype.parseChartAttr=function parseChartAttr(dataObj){_MSLine.prototype.parseChartAttr.call(this,dataObj);var chart=this,config=chart.config,jsonData=dataObj||chart.getFromEnv("dataSource"),chartAttrs=jsonData.chart;config.useCrossline=Number(chartAttrs.usecrossline)||chartAttrs.usecrossline===_lib.UNDEF?1:0;config.drawTrendRegion=0};ZoomLine.prototype.getInputConfigurations=function getInputConfigurations(){var iapi=this,config=iapi.config,hookFn=function hookFn(dsi,dei){iapi.addJob("inputZoom",function(){var info=config.viewPortConfig;info.dsi=dsi;info.dei=dei;iapi.updateManager();iapi.getChildren("xAxis")[0].prepareAttributes()},_schedular.priorityList.configure)},dragendFn=function dragendFn(){return hookFn(arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2])},inputComponents={dragZoomIn:{scaleX:true,scaleY:false,drawButton:false,boxStyle:{stroke:config.zoomPaneStroke,fill:config.zoomPaneFill,"stroke-width":0},catZoomLimit:2,skipGraphics:true,dragendFn:dragendFn},zoomResetButton:{hookFn:hookFn,tooltext:config.btnResetChartTooltext},zoomOutButton:{hookFn:hookFn,tooltext:config.btnZoomOutTooltext},dragPin:{orientation:"horizontal",attr:{stroke:config.zoomPaneStroke,fill:config.zoomPaneFill,"stroke-width":0},skipGraphics:!config.allowPinMode,pinAttr:{"stroke-width":0,stroke:"none",fill:config.pinPaneFill,"shape-rendering":"crisp"},strokeWidth:0,tooltext:config.showToolBarButtonTooltext&&config.btnSwitchToPinModeTooltext||BLANK}};return inputComponents};ZoomLine.prototype._setCategories=function _setCategories(){var iapi=this,config=iapi.config,dataObj=iapi.getFromEnv("dataSource"),chartDef=dataObj.chart||{},xAxis=iapi.getChildren("xAxis"),tempArr,data,j,len,cdm=config.cdm,cdmchar=config.cdmchar,category=dataObj.categories&&dataObj.categories[0].category||[];config.cdm=cdm=(0,_lib.pluckNumber)(chartDef.compactdatamode,0);config.cdmchar=cdmchar=(0,_lib.pluck)(chartDef.dataseparator,PIPE);if(cdm||typeof category==="string"){if(category.split){tempArr=category.split(cdmchar);data=[];for(j=0,len=tempArr.length;j<len;j+=1){data.push({label:tempArr[j]})}iapi.config.categories=dataObj.categories[0].category=data}}xAxis[0].setAxisPadding(0,0);xAxis[0].setTickValues(data||category)};ZoomLine.prototype.isWithinCanvas=function isWithinCanvas(e,chart){return _isWithinCanvas.call(this,e,chart)};ZoomLine.prototype.highlightPoint=function highlightPoint(showHover,cx,cy,point,index,toolText){var chart=this,chartConfig=chart.config,animationManager=chart.getFromEnv("animationManager"),chartComponents=chart.components,chartGraphics=chart.graphics,isHover=Number(showHover),trackerCheck=chartGraphics.tracker,tracker,datasetObj=chartComponents.dataset[index],datasetConfig=datasetObj&&datasetObj.config,radius=datasetObj&&datasetConfig.zoomedRadius||0,hoverCosmetics=datasetObj&&datasetConfig.hoverCosmetics,fill=hoverCosmetics&&hoverCosmetics.fill,borderColor=hoverCosmetics&&hoverCosmetics.borderColor,borderThickness=hoverCosmetics&&hoverCosmetics.borderThickness,plotEventHandlerCallback={click:function click(e){chart.plotEventHandler(this,e)},hoverIn:function hoverIn(e){chart.plotEventHandler(this,e,"dataplotRollover")},hoverOut:function hoverOut(e){chart.plotEventHandler(this,e,"dataplotRollout")}};if(!trackerCheck){tracker=chartGraphics.tracker=animationManager.setAnimation({el:"circle",attr:{cx:0,cy:0,r:radius,fill:isHover?fill:TRACKER_FILL,stroke:isHover?borderColor:TRACKER_FILL,"stroke-width":isHover?borderThickness:0,"clip-rect":chartConfig.canvasLeft+","+chartConfig.canvasTop+","+chartConfig.canvasWidth+","+chartConfig.canvasHeight},container:chartGraphics.trackerGroup,component:chart}).click(plotEventHandlerCallback.click).hover(plotEventHandlerCallback.hoverIn,plotEventHandlerCallback.hoverOut)}point&&tracker.data("eventArgs",{x:point.x,y:point.y,tooltip:point.tooltip,link:point.link});chartConfig.lastHoveredPoint=point;chart.getFromEnv("toolTipController").enableToolTip(tracker,toolText);tracker.transform("t"+(cx+chartConfig.canvasLeft)+","+(cy+chartConfig.canvasTop));point&&fireMouseEvent("mouseover",tracker&&tracker.node,chartConfig.lastMouseEvent)};ZoomLine.prototype.configureAttributes=function configureAttributes(dataObj){_MSLine.prototype.configureAttributes.call(this,dataObj);var style,iapi=this,jsonData=iapi.getFromEnv("dataSource"),chartDef=jsonData.chart||{},colorManager=iapi.getFromEnv("color-manager"),canvasBorderColor=colorManager.getColor("canvasBorderColor"),config;config=iapi.config;style=config.style;config.stepZoom=400/(100-(0,_lib.pluckNumber)(chartDef.stepzoom,25));if(config.stepZoom<=2){config.stepZoom=1.9}(0,_lib.extend2)(config,{useRoundEdges:(0,_lib.pluckNumber)(chartDef.useroundedges,0),zoomType:"x",canvasPadding:(0,_lib.pluckNumber)(chartDef.canvaspadding,0),scrollColor:(0,_libGraphics.getFirstColor)((0,_lib.pluck)(chartDef.scrollcolor,colorManager.getColor("altHGridColor"))),scrollShowButtons:!!(0,_lib.pluckNumber)(chartDef.scrollshowbuttons,1),scrollHeight:(0,_lib.pluckNumber)(chartDef.scrollheight,16)||16,scrollBarFlat:(0,_lib.pluckNumber)(chartDef.flatscrollbars,0),allowPinMode:(0,_lib.pluckNumber)(chartDef.allowpinmode,1),skipOverlapPoints:(0,_lib.pluckNumber)(chartDef.skipoverlappoints,1),showToolBarButtonTooltext:(0,_lib.pluckNumber)(chartDef.showtoolbarbuttontooltext,1),btnResetChartTooltext:(0,_lib.pluck)(chartDef.btnresetcharttooltext,"Reset Chart"),btnZoomOutTooltext:(0,_lib.pluck)(chartDef.btnzoomouttooltext,"Zoom out one level"),btnSwitchToZoomModeTooltext:(0,_lib.pluck)(chartDef.btnswitchtozoommodetooltext,"<strong>Switch to Zoom Mode</strong><br/>Select a subset of data to zoom "+"into it for detailed view"),btnSwitchToPinModeTooltext:(0,_lib.pluck)(chartDef.btnswitchtopinmodetooltext,"<strong>Switch to Pin Mode</strong><br/>Select a subset of data and compare "+"with the rest of the view"),pinPaneFill:(0,_libGraphics.convertColor)((0,_lib.pluck)(chartDef.pinpanebgcolor,canvasBorderColor),(0,_lib.pluckNumber)(chartDef.pinpanebgalpha,15)),zoomPaneFill:(0,_libGraphics.convertColor)((0,_lib.pluck)(chartDef.zoompanebgcolor,"#b9d5f1"),(0,_lib.pluckNumber)(chartDef.zoompanebgalpha,30)),zoomPaneStroke:(0,_libGraphics.convertColor)((0,_lib.pluck)(chartDef.zoompanebordercolor,"#3399ff"),(0,_lib.pluckNumber)(chartDef.zoompaneborderalpha,80)),showPeakData:(0,_lib.pluckNumber)(chartDef.showpeakdata,0),maxPeakDataLimit:(0,_lib.pluckNumber)(chartDef.maxpeakdatalimit,chartDef.maxpeaklimit,null),minPeakDataLimit:(0,_lib.pluckNumber)(chartDef.minpeakdatalimit,chartDef.minpeaklimit,null),crossline:{enabled:(0,_lib.pluckNumber)(chartDef.showcrossline,1),line:{"stroke-width":(0,_lib.pluckNumber)(chartDef.crosslinethickness,1),stroke:(0,_libGraphics.getFirstColor)((0,_lib.pluck)(chartDef.crosslinecolor,"#000000")),"stroke-opacity":(0,_lib.pluckNumber)(chartDef.crosslinealpha,20)/100},labelEnabled:(0,_lib.pluckNumber)(chartDef.showcrosslinelabel,chartDef.showcrossline,1),labelstyle:{fontSize:toFloat(chartDef.crosslinelabelsize)?toFloat(chartDef.crosslinelabelsize)+PX:style.outCanfontSize,fontFamily:(0,_lib.pluck)(chartDef.crosslinelabelfont,style.outCanfontFamily)},valueEnabled:(0,_lib.pluckNumber)(chartDef.showcrosslinevalues,chartDef.showcrossline,1),valuestyle:{fontSize:toFloat(chartDef.crosslinevaluesize)?toFloat(chartDef.crosslinevaluesize)+PX:style.inCanfontSize,fontFamily:(0,_lib.pluck)(chartDef.crosslinevaluefont,style.inCanvasStyle.fontFamily)}},useCrossline:(0,_lib.pluckNumber)(chartDef.usecrossline,1),tooltipSepChar:(0,_lib.pluck)(chartDef.tooltipsepchar,", "),showTerminalValidData:(0,_lib.pluckNumber)(chartDef.showterminalvaliddata,0)})};ZoomLine.prototype.getValuePixel=function getValuePixel(px){var chart=this,chartConfig=chart.config,info=chartConfig.viewPortConfig;return info.ddsi+mathFloor(px/info.ppp)};ZoomLine.prototype.getDatasets=function getDatasets(){var iapi=this,dataSetArr=[];iapi.iterateComponents(function(child){if(child.getType&&child.getType()==="dataset"){dataSetArr.push(child)}});return dataSetArr};ZoomLine.prototype.__preDraw=function __preDraw(){var seriesItemConf,ppp,ppl,iapi=this,iapiConfig=iapi.config,chartDef=iapi.getFromEnv("dataSource").chart,cdm=iapiConfig.cdm,xAxis=iapi.getChildren("xAxis")[0],info=iapiConfig.viewPortConfig,canvasConfig=iapi.getChildren("canvas")[0].config,canvasPadding=mathMax(canvasConfig.canvasPadding,canvasConfig.canvasPaddingLeft,canvasConfig.canvasPaddingRight),yAxis=iapi.getChildren("yAxis")[0],canvasHeight=iapiConfig.canvasHeight,chartAttrs=iapi.getFromEnv("dataSource").chart,clen=xAxis.getTicksLen(),_xAxis$getVisibleConf=xAxis.getVisibleConfig(),minValue=_xAxis$getVisibleConf.minValue,maxValue=_xAxis$getVisibleConf.maxValue,start=(0,_lib.pluckNumber)(chartDef.displaystartindex,minValue,1),end=(0,_lib.pluckNumber)(chartDef.displayendindex,maxValue,clen||2),dsi=toInt(start,10)-1,dei=toInt(end,10)-1,overFlowingMarkerWidth=0,dataSetArr,j;dataSetArr=iapi.getDatasets();j=dataSetArr.length;iapiConfig.borderWidth=(0,_lib.pluckNumber)(chartAttrs.showborder,1)?(0,_lib.pluckNumber)(chartAttrs.borderthickness,1):0;iapiConfig.updateAnimDuration=500;iapiConfig.status="zoom";iapiConfig.maxZoomLimit=(0,_lib.pluckNumber)(chartDef.maxzoomlimit,1e3);iapiConfig.viewPortHistory=[];(ppp=(0,_lib.pluckNumber)(chartDef.pixelsperpoint,15))<1&&(ppp=1);(ppl=(0,_lib.pluckNumber)(chartDef.pixelsperlabel,chartDef.xaxisminlabelwidth,xAxis.getAxisConfig("labels").rotation?20:60))<ppp&&(ppl=ppp);(dsi<0||dsi>=(clen-1||1))&&(dsi=0);(dei<=dsi||dei>(clen-1||1))&&(dei=clen-1||1);info=iapiConfig.viewPortConfig=(0,_lib.extend2)(iapiConfig.viewPortConfig,{amrd:(0,_lib.pluckNumber)(chartDef.anchorminrenderdistance,20),nvl:(0,_lib.pluckNumber)(chartDef.numvisiblelabels,0),cdm:cdm,oppp:ppp,oppl:ppl,dsi:dsi,dei:dei,vdl:dei-dsi,clen:clen,offset:0,step:1,llen:0,alen:0,ddsi:dsi,ddei:dei,ppc:0});if(!info.clen){return}while(j--){seriesItemConf=dataSetArr[j].config;overFlowingMarkerWidth=mathMax(overFlowingMarkerWidth,seriesItemConf.drawanchors&&(seriesItemConf.anchorradius||0)+(Number(seriesItemConf.anchorborderthickness)||0)||0)}iapiConfig.overFlowingMarkerWidth=overFlowingMarkerWidth;canvasPadding=iapiConfig.canvasPadding=mathMax(overFlowingMarkerWidth,canvasPadding);iapiConfig._prezoomed=info.dei-info.dsi<info.clen-1;iapiConfig._visw=Math.max(1,iapiConfig.canvasWidth-canvasPadding*2);iapiConfig._visx=iapiConfig.canvasLeft+canvasPadding;iapiConfig._visout=-(iapiConfig.height+canvasHeight+1e3);iapiConfig._yminValue=yAxis.getLimit().min;iapiConfig._ymin=yAxis.getPixel(iapiConfig._yminValue);if((0,_lib.pluckNumber)(chartDef.displaystartindex,chartDef.displayendindex)){xAxis.setVisibleConfig(start,end)}iapi.updateManager()};ZoomLine.prototype.resetZoom=function resetZoom(){var iapi=this,iapiConfig=iapi.config,history=iapiConfig.viewPortHistory,origInfo=history[0];if(!history.length){return false}history.length=0;if(iapi.zoomTo(origInfo.dsi,origInfo.dei,origInfo)){iapi.fireChartInstanceEvent("zoomReset",iapi._zoomargs,[iapi.getFromEnv("chartInstance").id])}return true};ZoomLine.prototype.zoomOut=function zoomOut(){var lastinfo,origInfo,iapi=this,iapiConfig=iapi.config,history=iapiConfig.viewPortHistory,dsi,dei,args;lastinfo=history.pop();origInfo=history[0]||iapiConfig.viewPortConfig;if(lastinfo){dsi=lastinfo.dsi;dei=lastinfo.dei}else{if(iapiConfig._prezoomed){dsi=0;dei=origInfo.clen-1}}args=iapi.zoomTo(dsi,dei,lastinfo);if(args){iapi.fireChartInstanceEvent("zoomedout",args)}return true};ZoomLine.prototype.zoomRangePixels=function zoomRangePixels(pxs,pxe){var chart=this,chartConfig=chart.config,info=chartConfig.viewPortConfig,ppp=info.ppp,start=info.ddsi,dsi,dei;dsi=start+mathFloor(pxs/ppp);dei=start+mathFloor(pxe/ppp);info.dsi=dsi;info.dei=dei;chart.updateManager()};ZoomLine.prototype.prepareAttributes=function prepareAttributes(){if(!this.config.hasChartMessage){this.__preDraw();_MSLine.prototype.prepareAttributes.call(this)}};ZoomLine.prototype.getValue=function getValue(point){var chart=this,chartConfig=chart.config,viewPortConfig=chartConfig.viewPortConfig,origpixel=chart.getOriginalPositions(point.x,point.y,point.x,point.y),origX=origpixel[0],origY=origpixel[1],xAxis=chart.getChildren("xAxis")[0],yAxis=chart.getChildren("yAxis")[0],xaxisRange=xAxis.config.axisRange,yaxisRange=yAxis.config.axisRange,minX=xaxisRange.min,maxX=xaxisRange.max,maxY=yaxisRange.max,minY=yaxisRange.min,xPVR=chartConfig.canvasWidth*viewPortConfig.scaleX/(maxX-minX),yPVR=chartConfig.canvasHeight*viewPortConfig.scaleY/(maxY-minY);return{x:minX+(origX-chartConfig.canvasLeft)/xPVR,y:maxY-(origY-chartConfig.canvasTop)/yPVR}};ZoomLine.prototype.getOriginalPositions=function getOriginalPositions(x1,y1,x2,y2){var newW,newH,newX,newY,chart=this,chartConfig=chart.config,viewPortConfig=chartConfig.viewPortConfig,oldScaleX=viewPortConfig.scaleX,oldScaleY=viewPortConfig.scaleY,oldX=viewPortConfig.x,oldY=viewPortConfig.y,xMin=mathMin(x1,x2),xMax=mathMax(x1,x2),yMin=mathMin(y1,y2),yMax=mathMax(y1,y2);xMax=xMax>chartConfig.canvasWidth?chartConfig.canvasWidth:xMax;yMax=yMax>chartConfig.canvasHeight?chartConfig.canvasHeight:yMax;xMin=xMin<0?0:xMin;yMin=yMin<0?0:yMin;newW=(xMax-xMin)/oldScaleX;newH=(yMax-yMin)/oldScaleY;newX=oldX+xMin/oldScaleX;newY=oldY+yMin/oldScaleY;return[newX,newY,newW,newH]};ZoomLine.prototype.updateManager=function updateManager(){var i,labelStep,stepValue,chart=this,scaleX,dataSets=this.getDatasets(),len=dataSets.length,chartConfig=chart.config,info=chartConfig.viewPortConfig,visW=chartConfig._visw,xAxis=chart.getChildren("xAxis")[0],getPixelX=function getPixelX(val){return xAxis.getPixel(val,{wrtVisible:true})},cssLabel=xAxis.getAxisConfig("labels").style,oppp,vdl,ppl,ppp,step,lskip,norm,dsi,dei,ddsi,ddei,nvl,visibleExtremes;if(chartConfig.legendClicked){for(i=0;i<len;i+=1){dataSets[i].draw()}return}!info&&(info=chartConfig.viewPortConfig);oppp=info.oppp;nvl=ppl=info.nvl;dsi=info.dsi;dei=info.dei;vdl=info.vdl=dei-dsi;ppl=info.ppl=nvl?visW/nvl:info.oppl;step=info.step=(ppp=info.ppp=visW/vdl)<oppp?mathCeil(oppp/ppp):1;lskip=info.lskip=mathCeil(mathMax(ppl,toFloat(cssLabel.lineHeight))/ppp/step);ddsi=info.dsi;ddei=info.dei;info.offset=0;norm=info.norm=ddsi%step;info.ddsi=ddsi=ddsi-norm;info.ddei=ddei=ddei+2*step-norm;info._ymin=chartConfig._ymin;info._yminValue=chartConfig._yminValue;info.x=(getPixelX(ddsi)-getPixelX(xAxis.getVisibleConfig().minValue)+info.offset)/info.scaleX;if(ddei-ddsi>xAxis.getTicksLen()){info.scaleX=1}else{info.scaleX=xAxis.getTicksLen()/Math.abs(ddei-ddsi-step-.9)}visibleExtremes=xAxis.getVisibleConfig();stepValue=Math.ceil((visibleExtremes.maxValue-visibleExtremes.minValue+1)/nvl);scaleX=chartConfig.viewPortConfig&&chartConfig.viewPortConfig.scaleX;labelStep=Math.max(Math.round(xAxis.getAxisConfig("labelStep")/scaleX),nvl?stepValue:lskip*step);xAxis.setLabelConfig({step:labelStep})};ZoomLine.prototype.getParsedLabel=function getParsedLabel(index){var xlabels=this.xlabels;return xlabels.parsed[index]||(xlabels.parsed[index]=(0,_lib.parseUnsafeString)(xlabels.data[index]||BLANK))};ZoomLine.prototype._setAxisScale=function _setAxisScale(){var xAxis=this.getChildren("xAxis")[0];xAxis.setScrollType("always")};ZoomLine.prototype.getDSdef=function getDSdef(){return _zoomline2["default"]};return ZoomLine}(_msline2["default"]);exports["default"]=ZoomLine},694:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _lib=__webpack_require__(118);var _line=__webpack_require__(346);var _line2=_interopRequireDefault(_line);var _dependencyManager=__webpack_require__(125);var _zoomlineAnimation=__webpack_require__(695);var _zoomlineAnimation2=_interopRequireDefault(_zoomlineAnimation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass)}var POINTER="pointer",DEFAULT_CURSOR="default",DATAPLOTCLICK="dataplotclick",HTP=_lib.hasTouch?_lib.TOUCH_THRESHOLD_PIXELS:_lib.CLICK_THRESHOLD_PIXELS;(0,_dependencyManager.addDep)({name:"zoomlineAnimation",type:"animationRule",extension:_zoomlineAnimation2["default"]});var ZoomLineDataset=function(_LineDataset){_inherits(ZoomLineDataset,_LineDataset);function ZoomLineDataset(){_classCallCheck(this,ZoomLineDataset);return _possibleConstructorReturn(this,_LineDataset.apply(this,arguments))}ZoomLineDataset.prototype.getType=function getType(){return"dataset"};ZoomLineDataset.prototype.getName=function getName(){return"zoomLine"};ZoomLineDataset.prototype.__setDefaultConfig=function __setDefaultConfig(){_LineDataset.prototype.__setDefaultConfig.call(this);this.config.skipIgnorerIndices=[];this.config.showPeakData=0;this.config.showTerminalValidData=0;this.config.minPeakDataLimit=null;this.config.maxPeakDataLimit=null};ZoomLineDataset.prototype._plotConfigure=function _plotConfigure(i,setData,newDataSetLen){_LineDataset.prototype._plotConfigure.call(this,i,setData,newDataSetLen);var dataset=this,conf=dataset.config,value=dataset.components.data[i].config.setValue,len=newDataSetLen||dataset.getFromEnv("xAxis").getTicksLen(),showTerminalValidData=conf.showTerminalValidData,showPeakData=conf.showPeakData,peakDataLowerBound=conf.maxPeakDataLimit,peakDataUpperBound=conf.minPeakDataLimit,selectDataAtIntersection=peakDataLowerBound<peakDataUpperBound,selectDataAtUnion=peakDataLowerBound>peakDataUpperBound,isValueWithinBounds=value>peakDataLowerBound&&value<peakDataUpperBound,isValueBeyondBounds=value>peakDataLowerBound||value<peakDataUpperBound;if(showPeakData){if(selectDataAtIntersection&&isValueWithinBounds){conf.skipIgnorerIndices.push(i)}else if(selectDataAtUnion&&isValueBeyondBounds){conf.skipIgnorerIndices.push(i)}}if(showTerminalValidData&&i===len-1)conf.skipIgnorerIndices.push(i)};ZoomLineDataset.prototype.drawPlots=function drawPlots(){var dataset=this,xAxis=dataset.getFromEnv("xAxis"),viewPortConfig=dataset.getFromEnv("chartConfig").viewPortConfig;if(xAxis.getPixel(viewPortConfig.step)-xAxis.getPixel(0)>=viewPortConfig.amrd){_LineDataset.prototype.drawPlots.call(this)}else{dataset.hideAllAnchors()}};ZoomLineDataset.prototype._setConfigure=function _setConfigure(newDataset,newIndex){var dataSet=this,conf=dataSet.config,chart=dataSet.getFromEnv("chart"),chartConfig=chart.config,cdef=chart.getFromEnv("dataSource").chart,JSONData=dataSet.config.JSONData;conf.drawanchors=(0,_lib.pluckNumber)(cdef.drawanchors,cdef.showanchors,1);conf.anchorradius=(0,_lib.pluckNumber)(JSONData.anchorradius,cdef.anchorradius,conf.linethickness+2);conf.showTerminalValidData=(0,_lib.pluckNumber)(chartConfig.showTerminalValidData,0);conf.showPeakData=(0,_lib.pluckNumber)(chartConfig.showPeakData,0);if(conf.showPeakData&&(chartConfig.maxPeakDataLimit||chartConfig.minPeakDataLimit)){conf.maxPeakDataLimit=(0,_lib.pluckNumber)(chartConfig.maxPeakDataLimit,Number.MIN_SAFE_INTEGER);conf.minPeakDataLimit=(0,_lib.pluckNumber)(chartConfig.minPeakDataLimit,Number.MAX_SAFE_INTEGER)}_LineDataset.prototype._setConfigure.call(this,newDataset,newIndex)};ZoomLineDataset.prototype.configureAttributes=function configureAttributes(datasetJSON){_LineDataset.prototype.configureAttributes.call(this,datasetJSON);var pgsw,conf,pin={},dataSet=this,cdef=dataSet.getFromEnv("chart").getFromEnv("dataSource").chart;conf=dataSet.config;pgsw=conf.linethickness+(0,_lib.pluckNumber)(cdef.pinlinethicknessdelta,1);pin["stroke-width"]=pgsw>0&&pgsw||0;pin["stroke-dasharray"]=[3,2];pin.stroke=(0,_lib.hashify)(conf.linecolor);pin["stroke-opacity"]=conf.alpha/100;pin["stroke-linejoin"]=conf["stroke-linejoin"]="round";pin["stroke-linecap"]=conf["stroke-linecap"]="round";conf.pin=pin;conf.animation=false;conf.transposeanimduration=0;conf.defaultPadding={left:0,right:0}};ZoomLineDataset.prototype.drawLabel=function drawLabel(){return this};ZoomLineDataset.prototype.isWithinShape=function isWithinShape(pointObj,pX,x,y){var anchorProps,config,radius,borderThickness,dataset,dataStore,dragTolerance,xPos,yPos,dx,dy,diff,hoverEffects;if(!pointObj){return}anchorProps=pointObj.config.anchorProps;config=pointObj.config;borderThickness=anchorProps.borderThickness;dataset=this;dataStore=dataset.components.data;dragTolerance=(0,_lib.pluckNumber)(config.dragTolerance,0);xPos=pointObj._xPos;yPos=pointObj._yPos;if(yPos!==null){hoverEffects=pointObj.config.hoverEffects;radius=Math.max(anchorProps.radius,hoverEffects&&hoverEffects.anchorRadius||0,HTP)+borderThickness/2;dx=x-xPos;dy=y-yPos;diff=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2));if(diff<=radius||diff<=dragTolerance){return{pointIndex:pX,hovered:true,pointObj:dataStore[pX]}}else{return false}}};ZoomLineDataset.prototype.hideAllAnchors=function hideAllAnchors(){var dataset=this,dataStore=dataset.components.data,dsLen=dataStore.length,dataObj,i,ii;for(i=0,ii=dsLen;i<ii;i++){dataObj=dataStore[i];if(dataObj&&dataObj.graphics){dataObj.graphics.element&&dataObj.graphics.element.hide()}}};ZoomLineDataset.prototype._firePlotEvent=function _firePlotEvent(eventType,plotIndex,e){var dataset=this,chart=dataset.getFromEnv("chart"),components=dataset.components,dataStore=components.data,toolTipController=dataset.getFromEnv("toolTipController"),data=dataStore[plotIndex],setElement=data.graphics.element,toolTip=dataset.config.currentToolTip,noCrossline=!chart.config.useCrossline,config,eventArgs,setLink;config=data.config;setLink=config.setLink;eventArgs=config.eventArgs;switch(eventType){case"mouseover":noCrossline&&dataset._decideTooltipType(plotIndex,e);dataset._rolloverResponseSetter(chart,data,e);setLink&&(setElement.node.style.cursor=POINTER);break;case"mouseout":toolTipController.hide(toolTip);dataset._rolloutResponseSetter(chart,data,e);setLink&&(setElement.node.style.cursor=DEFAULT_CURSOR);break;case"click":chart.plotEventHandler(setElement,e,DATAPLOTCLICK,eventArgs);break;case"mousemove":noCrossline&&dataset._decideTooltipType(plotIndex,e)}};ZoomLineDataset.prototype.calculateScrollRange=function calculateScrollRange(){var dataSet=this,conf=dataSet.config,xAxis=dataSet.getFromEnv("xAxis"),catLen=xAxis.getTicksLen(),step=dataSet.getFromEnv("chartConfig").viewPortConfig.step||1;conf.scrollMinVal=Math.max(Math.round(xAxis.getVisibleConfig().minValue),0)-step;conf.scrollMaxVal=Math.min(Math.round(xAxis.getVisibleConfig().maxValue)+1,catLen)+step;conf.scrollMinValForLabel=Math.max(Math.round(xAxis.getVisibleConfig().minValue),0)-step;conf.scrollMaxValForLabel=Math.min(Math.round(xAxis.getVisibleConfig().maxValue)+1,catLen)+step;conf.scrollMinVal-=conf.scrollMinVal%step;conf.scrollMinValForLabel-=conf.scrollMinValForLabel%step};return ZoomLineDataset}(_line2["default"]);exports["default"]=ZoomLineDataset},695:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _lineAnimation=__webpack_require__(349);var _lineAnimation2=_interopRequireDefault(_lineAnimation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports["default"]={"initial.dataset.zoomLine":_lineAnimation2["default"]["initial.dataset.line"]}},696:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=function(chart){var jsonData=chart.getFromEnv("dataSource"),chartDef=jsonData.chart||{},cdm=void 0,cdmchar=void 0,chartConfig=chart.config,datasetsJSON=jsonData.dataset,dataSet=void 0,children=chart.getChildren(),canvas=children.canvas[0],i=void 0,data=void 0,j=void 0,tempArr=void 0,len=void 0,datasetParent=canvas.getChildren("vCanvas")[0];chartConfig.cdm=cdm=(0,_lib.pluckNumber)(chartDef.compactdatamode,0);chartConfig.cdmchar=cdmchar=(0,_lib.pluck)(chartDef.dataseparator,PIPE);if(!datasetsJSON){chart.setChartMessage()}for(i=0;i<datasetsJSON.length;i++){dataSet=datasetsJSON[i];if(cdm){if(dataSet.data&&dataSet.data.split){tempArr=dataSet.data.split(cdmchar);data=[];for(j=0,len=tempArr.length;j<len;j++){data.push({value:tempArr[j]})}dataSet.data=data}}}(0,_lib.datasetFactory)(datasetParent,chart.getDSdef(),"dataset",datasetsJSON.length,datasetsJSON);chart.iterateComponents(function(child){if(child.getType&&child.getType()==="dataset"){child.createPinElem&&child.addEventListener("createpinelements",child.createPinElem)}})};var _lib=__webpack_require__(118);var PIPE="|"},697:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _zoomline=__webpack_require__(693);var _zoomline2=_interopRequireDefault(_zoomline);var _msdybasecartesian=__webpack_require__(383);var _cartesianAxisDualY=__webpack_require__(384);var _cartesianAxisDualY2=_interopRequireDefault(_cartesianAxisDualY);var _zoomlineDualYDataset=__webpack_require__(698);var _zoomlineDualYDataset2=_interopRequireDefault(_zoomlineDualYDataset);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass)}var ZoomLineDy=function(_ZoomLine){_inherits(ZoomLineDy,_ZoomLine);function ZoomLineDy(){_classCallCheck(this,ZoomLineDy);var _this=_possibleConstructorReturn(this,_ZoomLine.call(this));_this.getSpecificxAxisConf=_msdybasecartesian.getSpecificxAxisConf;_this.getSpecificyAxisConf=_msdybasecartesian.getSpecificyAxisConf;_this.registerFactory("axis",_cartesianAxisDualY2["default"],["canvas"]);_this.registerFactory("dataset",_zoomlineDualYDataset2["default"],["vCanvas"]);return _this}ZoomLineDy.getName=function getName(){return"ZoomLineDy"};ZoomLineDy.prototype.getName=function getName(){return"ZoomLineDy"};ZoomLineDy.prototype.__setDefaultConfig=function __setDefaultConfig(){_ZoomLine.prototype.__setDefaultConfig.call(this);var config=this.config;config.friendlyName="Zoomable and Panable Multi-series Dual-axis Line Chart";config.defaultDatasetType="zoomline";config.isdual=true;config.syncaxislimits=0};ZoomLineDy.prototype._feedAxesRawData=function _feedAxesRawData(){return _msdybasecartesian._feedAxesRawData.call(this)};return ZoomLineDy}(_zoomline2["default"]);ZoomLineDy.prototype.setAxisDimention=_msdybasecartesian.setAxisDimention;exports["default"]=ZoomLineDy},698:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=function(chart){var jsonData=chart.getFromEnv("dataSource"),chartDef=jsonData.chart||{},cdm=void 0,cdmchar=void 0,chartConfig=chart.config,datasetsJSON=jsonData.dataset,dataSet=void 0,children=chart.getChildren(),canvas=children.canvas[0],i=void 0,data=void 0,j=void 0,tempArr=void 0,len=void 0,datasetJSON=void 0,parentyaxis=void 0,indices1=[],indices2=[],confArr1=[],confArr2=[],vCanvasArr=canvas.getChildren("vCanvas");chartConfig.cdm=cdm=(0,_lib.pluckNumber)(chartDef.compactdatamode,0);chartConfig.cdmchar=cdmchar=(0,_lib.pluck)(chartDef.dataseparator,PIPE);if(!datasetsJSON){chart.setChartMessage()}for(i=0;i<datasetsJSON.length;i++){dataSet=datasetsJSON[i];if(cdm){if(dataSet.data&&dataSet.data.split){tempArr=dataSet.data.split(cdmchar);data=[];for(j=0,len=tempArr.length;j<len;j++){data.push({value:tempArr[j]})}dataSet.data=data}}}for(i=0;i<datasetsJSON.length;i++){datasetJSON=datasetsJSON[i];parentyaxis=datasetJSON.parentyaxis||"";if(parentyaxis.toLowerCase()==="s"){confArr2.push(datasetJSON);indices2.push(i)}else{confArr1.push(datasetJSON);indices1.push(i)}}if(confArr1.length){(0,_lib.datasetFactory)(vCanvasArr[0],chart.getDSdef(),"dataset_line",confArr1.length,confArr1,indices1)}else{removeDataset(vCanvasArr[0])}if(confArr2.length){(0,_lib.datasetFactory)(vCanvasArr[1],chart.getDSdef(),"dataset_line",confArr2.length,confArr2,indices2)}else{removeDataset(vCanvasArr[1])}chart.iterateComponents(function(child){if(child.getType&&child.getType()==="dataset"){child.createPinElem&&child.addEventListener("createpinelements",child.createPinElem)}})};var _lib=__webpack_require__(118);var PIPE="|",removeDataset=function removeDataset(component){component&&component.iterateComponents(function(child){if(child.getType()==="dataset"){child.remove()}})}},699:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _lib=__webpack_require__(118);var _componentInterface=__webpack_require__(131);var _componentInterface2=_interopRequireDefault(_componentInterface);var _domEvent=__webpack_require__(120);var _domEvent2=_interopRequireDefault(_domEvent);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass)}var BLANK="",math=Math,mathMax=math.max,mathMin=math.min,UNDEF=void 0,scale=void 0,boxHeight=0,_top=void 0,plotOut=void 0,hasTouch="ontouchstart"in window,doc=window.document,CANVAS="canvas",TOUCHSTART="touchstart",MOUSEDOWN="mousedown",chartInclusionList={zoomlinedy:true,zoomline:true},createGroup=function createGroup(groupName,parentContainer,crossLine){var animationManager=crossLine.getFromEnv("animationManager");return animationManager.setAnimation({el:"group",attr:{name:groupName},container:parentContainer,state:"appearing",component:crossLine,label:"group"})},nearestUndefined=function nearestUndefined(pos){var i,diff,_scale,nearest={},lowest=Number.POSITIVE_INFINITY;for(i=0;i<this.length;i++){diff=this[i]-pos;diff<0?_scale=scale.NEG:_scale=scale.POS;diff=Math.abs(diff);if(diff<=lowest){lowest=diff;nearest.absValue=diff;nearest.noScaleSide=_scale}}return nearest},getHandler=function getHandler(_this){return{onWindowTouch:function onWindowTouch(e){var canvas=_this.getLinkedParent(),config=_this.config,coordinate;if(canvas){coordinate=(0,_lib.getMouseCoordinate)(canvas.getFromEnv("chart-container"),e,canvas.getFromEnv("chart"));if(canvas.isWithinCanvas(coordinate.chartX,coordinate.chartY)){return}_this.hide();_this.position=UNDEF;config.docEventOutput&&config.docEventOutput.unlisten();config.docEventOutput=UNDEF}},onMouseOut:function onMouseOut(){_this.hide();_this.position=UNDEF},onMouseMove:function onMouseMove(e){var residue,info,line,step,chart,xAxis,chartConfig,canvasLeft,axisDimention,x,xAxisVisible,bridgePixel,winTouchHandler,pos;if(_this.disabled||_this._mouseIsDown&&!hasTouch){return}if(!_this.config.docEventOutput){winTouchHandler=_this.config.handlers.onWindowTouch;if(hasTouch){_this.config.docEventOutput=_domEvent2["default"].listen(doc,TOUCHSTART,winTouchHandler)}else if(_lib.isIE11){_this.config.docEventOutput=_domEvent2["default"].listen(doc,MOUSEDOWN,winTouchHandler)}}info=_this.getZoomInfo();line=_this.getGraphicalElement("line");step=info.step;chart=_this.chart;xAxis=chart.getChildren("xAxis")[0];chartConfig=chart.get("config");canvasLeft=chartConfig.canvasLeft;axisDimention=xAxis.getAxisConfig("axisDimention");x=(0,_lib.getMouseCoordinate)(_this.getFromEnv("chart-container"),e,chart).chartX;xAxisVisible=xAxis.getVisibleConfig();bridgePixel=axisDimention.x-canvasLeft;pos=(pos=_this.getDataIndexFromPixel(Math.round(x)))+((residue=pos%step)>step/2?step-residue:-residue);x=xAxis.getPixel(pos,{wrtVisible:true})-bridgePixel-canvasLeft;x-=info.offset;line.transform(["T",Math.round(x),0]);_this.hidden&&chartConfig.crossline.enabled!==0&&_this.show();(pos<xAxisVisible.minValue||pos>xAxisVisible.maxValue)&&_this.hide();if(pos!==_this.position||_this.hidden){_this.position=pos;_this.lineX=x;_this.updateLabels()}}}};var CrossLine=function(_ComponentInterface){_inherits(CrossLine,_ComponentInterface);function CrossLine(){_classCallCheck(this,CrossLine);var _this2=_possibleConstructorReturn(this,_ComponentInterface.call(this));_this2.config.handlers=getHandler(_this2);return _this2}CrossLine.prototype.configureAttributes=function configureAttributes(options){this.config.options=options};CrossLine.prototype.draw=function draw(){var i=void 0,ii=void 0,plot=void 0,plotColor=void 0,attrObj={},crossLine=this,labelPadding=2.5,chart=crossLine.getFromEnv("chart"),chartComponents=chart.getFromEnv(),numberFormatter=chartComponents["number-formatter"],chartConfig=chart.config,plotX=crossLine.left=chart.getChildren("xAxis")[0].getAxisConfig("axisDimention").x,plotY=crossLine.top=chartConfig.canvasTop,plotH=crossLine.height=chartConfig.canvasHeight,plotO=crossLine._visout=chartConfig._visout,plots=[],animationManager=crossLine.getFromEnv("animationManager"),groupValue=void 0,fetchedLine=crossLine.getGraphicalElement("line"),line=void 0,options=crossLine.config.options,labelStyle=options.labelstyle,valueStyle=options.valuestyle,pyaxis=chart.getChildren("yAxis")[0],pYAxisLimits=pyaxis.getLimit(),syaxis=chart.getChildren("yAxis")[1],sYAxisLimits=syaxis&&syaxis.getLimit(),fetchedLabels=crossLine.getGraphicalElement("labels"),labels=[],positionLabel=void 0,groupLabel=void 0,fetchedPositionLabel=crossLine.getGraphicalElement("positionLabel"),crosslineBottomGroup=crossLine.getLinkedParent().getChildContainer("crosslineBottom"),crosslineTopGroup=crossLine.getLinkedParent().getChildContainer("crosslineTop"),callbackLabel=function callbackLabel(){this.remove()},callbackValue=function callbackValue(){this.remove()};chart.iterateComponents(function(child){if(child.getType&&child.getType()==="dataset"&&!child.getState("removed")){plots.push(child)}});crossLine.plots=plots;crossLine.width=chartConfig._visw;groupValue=crossLine.group;if(!(groupValue=crossLine.getContainer("valueGroup"))){groupValue=crossLine.addContainer("valueGroup",createGroup("crossline-value-group",crosslineTopGroup,crossLine))}if(!(groupLabel=crossLine.getContainer("labelGroup"))){groupLabel=crossLine.addContainer("labelGroup",createGroup("crossline-label-group",crosslineTopGroup,crossLine));groupLabel.insertBefore(chart.getChildContainer("plotGroup"))}crossLine.container=crosslineBottomGroup;groupValue.attr({transform:["T",plotX,chartConfig._ymin]}).css(valueStyle);line=animationManager.setAnimation({el:fetchedLine||"path",container:crosslineBottomGroup,doNotRemove:true,attr:(0,_lib.extend2)({path:["M",plotX,plotY,"l",0,plotH]},options.line)}).toBack();if(!fetchedLine){crossLine.addGraphicalElement("line",line,false)}if(options.labelEnabled){attrObj.x=plotO;attrObj.y=plotY+plotH+(chartConfig.scrollHeight||0)+labelPadding;attrObj["vertical-align"]="top";attrObj.direction=chartConfig.textDirection;attrObj.text=BLANK}positionLabel=animationManager.setAnimation({el:fetchedPositionLabel||"text",attr:options.labelEnabled&&attrObj,css:options.labelEnabled&&labelStyle,container:groupLabel,doNotRemove:true,callback:!options.labelEnabled&&callbackLabel});if(!fetchedPositionLabel&&options.labelEnabled){crossLine.addGraphicalElement("positionLabel",positionLabel,false)}crossLine.hide();crossLine.ppixelRatio=-(pyaxis.config.axisDimention.axisLength/pyaxis.getVisibleLength());crossLine.spixelRatio=syaxis&&-(syaxis.config.axisDimention.axisLength/syaxis.getVisibleLength());crossLine.yminValue=chartConfig._yminValue;crossLine.pyaxisminvalue=pYAxisLimits.min;crossLine.pyaxismaxvalue=pYAxisLimits.max;crossLine.syaxisminvalue=sYAxisLimits&&sYAxisLimits.min;crossLine.syaxismaxvalue=sYAxisLimits&&sYAxisLimits.max;crossLine.positionLabels=chartConfig.xlabels||{data:[],parsed:[]};crossLine.chart=chart;i=0;if(options.valueEnabled){for(ii=plots.length;i<ii;i+=1){plot=plots[i];plotColor=(0,_lib.hashify)(plot.config.linecolor);attrObj.x=0;attrObj.y=plotO;attrObj.fill=plotColor;attrObj.direction=chartConfig.textDirection;attrObj.text=BLANK;attrObj["text-bound"]=valueStyle["text-bound"];attrObj.lineHeight=valueStyle.lineHeight;labels[i]=animationManager.setAnimation({el:fetchedLabels&&fetchedLabels[i]||"text",container:groupValue,doNotRemove:true,attr:attrObj});!(fetchedLabels&&fetchedLabels[i])&&crossLine.addGraphicalElement("labels",labels[i],true)}crossLine.numberFormatter=numberFormatter}for(ii=fetchedLabels&&fetchedLabels.length;i<ii;i++){animationManager.setAnimation({el:fetchedLabels[i],component:crossLine,doNotRemove:true,callback:callbackValue})}fetchedLabels&&fetchedLabels.splice(plots.length)};CrossLine.prototype.getType=function getType(){return"crossline"};CrossLine.prototype.getName=function getName(){return"crossLine"};CrossLine.prototype.getZoomInfo=function getZoomInfo(){return this.getFromEnv("chartConfig").viewPortConfig};CrossLine.prototype.getDataIndexFromPixel=function getDataIndexFromPixel(px){var xAxis=this.getFromEnv("chart").getChildren("xAxis")[0];return Math.round(xAxis.getValue(px,{wrtVisible:true}))};CrossLine.prototype.getPositionLabel=function getPositionLabel(index){var xAxis=this.getFromEnv("chart").getChildren("xAxis")[0],text=xAxis.getLabel(index);return text&&text.label||BLANK};CrossLine.prototype.disable=function disable(state){if(state!==UNDEF){this.disabled=!!state;if(this.disabled&&this.visible){this.hide()}}return this.disabled};CrossLine.prototype.updateLabels=function updateLabels(){var crossline=this,labelPadding=2.5,animationManager=crossline.getFromEnv("animationManager"),labels=crossline.getGraphicalElement("labels"),positionLabel=crossline.getGraphicalElement("positionLabel"),plots=crossline.plots,visw=crossline.width,position=crossline.position,x=crossline.lineX,flooredX=Math.floor(x),dummyText=crossline.dummyText,numberFormatter=crossline.numberFormatter,pYAxisMinValue=crossline.pyaxisminvalue,pYAxisMaxValue=crossline.pyaxismaxvalue,sYAxisMinValue=crossline.syaxisminvalue,sYAxisMaxValue=crossline.syaxismaxvalue,verticalLimits=getVerticalLimits(crossline);plotOut=crossline._visout;if(labels){if(!dummyText){dummyText=crossline.dummyText=crossline.getFromEnv("paper").text().hide()}dummyText.attr({text:numberFormatter.yAxis("0")});dummyText&&verticalLimits.init(dummyText.getBBox().height,labels.length);labels.forEach(function(label,i){if(plots[i].getState("removed")){return}var plot=plots[i],value=plot.components.data[position]&&plot.components.data[position].config.setValue,labelYPos,yAxis=plot.config.parentYAxis;if(value===UNDEF||!plot.getState("visible")||(yAxis?value>sYAxisMaxValue||value<sYAxisMinValue:value>pYAxisMaxValue||value<pYAxisMinValue)){labelYPos=plotOut}else{labelYPos=yAxis?(value-sYAxisMinValue)*crossline.spixelRatio:(value-pYAxisMinValue)*crossline.ppixelRatio}verticalLimits.occupy(labelYPos,label)})}labels&&labels.forEach(function(label,i){if(plots[i].getState("removed")){return}var plot=plots[i],GUTTER=10,value=plot.components.data[position]&&plot.components.data[position].config.setValue,bBox,labelWidth,halfLabelWidth,adjustedHalfLabelWidth,_xPos,_yPos,text=numberFormatter[plot.config.parentYAxis?"sYAxis":"yAxis"](value);if(text){label.attr({text:text});bBox=label.getBBox();labelWidth=bBox&&bBox.width;halfLabelWidth=labelWidth&&labelWidth*.5;adjustedHalfLabelWidth=halfLabelWidth&&halfLabelWidth+GUTTER;_yPos=label.calcY;_xPos=mathMax(0,mathMin(flooredX,visw));_yPos!==UNDEF&&_xPos!==UNDEF&&animationManager.setAnimation({el:label,attr:{x:_xPos,y:_yPos,"text-anchor":x<=adjustedHalfLabelWidth&&"start"||x+adjustedHalfLabelWidth>=visw&&"end"||"middle","text-bound":["rgba(255,255,255,0.8)","rgba(0,0,0,0.2)",1,labelPadding]},doNotRemove:true,component:crossline})}else{label.attr({x:-visw})}});positionLabel&&animationManager.setAnimation({el:positionLabel,attr:{x:x+crossline.left,text:crossline.getPositionLabel(position),"text-bound":["rgba(255,255,255,1)","rgba(0,0,0,1)",1,labelPadding]},component:crossline})};CrossLine.prototype.show=function show(){if(!this.disabled){this.hidden=false;var valueGroup=this.getContainer("valueGroup"),positionLabel=this.getGraphicalElement("positionLabel"),line=this.getGraphicalElement("line");valueGroup&&valueGroup.show();positionLabel&&positionLabel.show();line&&line.show()}};CrossLine.prototype.hide=function hide(){this.hidden=true;var valueGroup=this.getContainer("valueGroup"),positionLabel=this.getGraphicalElement("positionLabel"),line=this.getGraphicalElement("line");valueGroup&&valueGroup.hide();positionLabel&&positionLabel.hide();line&&line.hide()};CrossLine.prototype.dispose=function dispose(){var crossline=this,key;for(key in crossline){crossline.hasOwnProperty(key)&&delete crossline[key]}};return CrossLine}(_componentInterface2["default"]);function getVerticalLimits(crossline){var yminValue=crossline.yminValue,chart=crossline.getFromEnv("chart"),pyaxis=chart.getChildren("yAxis")[0],_bottom=pyaxis.getPixel(yminValue),margin=2,oMatrix=void 0,result={},sections=void 0;scale={};_top=crossline.height*-1;try{Object.defineProperty(scale,"POS",{enumerable:false,configurable:false,get:function get(){return 1}});Object.defineProperty(scale,"NEG",{enumerable:false,configurable:false,get:function get(){return-1}})}catch(e){scale.POS=1;scale.NEG=-1}try{Object.defineProperty(result,"top",{enumerable:false,configurable:false,get:function get(){return _top}});Object.defineProperty(result,"bottom",{enumerable:false,configurable:false,get:function get(){return _bottom}})}catch(e){result.top=_top;result.bottom=_bottom}result.init=function(height){var i,defaultValue=0;boxHeight=height+margin;_top+=boxHeight/2;sections=Math.floor(Math.abs(_top)/boxHeight);oMatrix=new OccupancyMatrix(sections);for(i=0;i<sections;i++){oMatrix.pos.push(defaultValue)}};result.occupy=function(pos,label){var passedSections=Math.floor(Math.abs(_top-pos)/boxHeight);oMatrix&&oMatrix.attachShift(pos,passedSections,label)};return result}var AttachableLabel=function(){function AttachableLabel(){_classCallCheck(this,AttachableLabel);this.y=0;this.lRef=UNDEF;this.__shift=0;this.__index=0}AttachableLabel.prototype.applyShift=function applyShift(shiftApplied){this.__shift=shiftApplied;this.lRef.calcY=this.y+=shiftApplied*boxHeight};AttachableLabel.prototype.applyDirectIndex=function applyDirectIndex(newIndex){this.__index=newIndex;this.lRef.calcY=this.y=_top-newIndex*boxHeight*-1};return AttachableLabel}();var OccupancyMatrix=function(){function OccupancyMatrix(count){_classCallCheck(this,OccupancyMatrix);this.holes=[];this.pos=[];for(var i=0;i<count;i++){this.holes.push(i)}}OccupancyMatrix.prototype.repositionHoles=function repositionHoles(){var i,index=0,pos=this.pos,value;this.holes.length=0;for(i=0;i<pos.length;i++){value=pos[i];!value&&(this.holes[index++]=i)}};OccupancyMatrix.prototype.attachShift=function attachShift(value,index,label){var indexVal,pos=this.pos,length=pos.length,nearestUndefIndex,tempArr,attachedLabel,_index,calibratedIndex,nearestOffset;if(value===plotOut){label.calcY=plotOut;return}else{calibratedIndex=index>length-1?length-1:index;indexVal=pos[calibratedIndex]}attachedLabel=new AttachableLabel;attachedLabel.y=value;attachedLabel.lRef=label;if(!indexVal){attachedLabel.applyDirectIndex(calibratedIndex);pos.splice(calibratedIndex,1,attachedLabel);this.holes.splice(this.holes.indexOf(calibratedIndex),1);return}nearestOffset=nearestUndefined.call(this.holes,calibratedIndex);nearestUndefIndex=calibratedIndex+nearestOffset.absValue*nearestOffset.noScaleSide;if(nearestOffset.noScaleSide===scale.POS){attachedLabel.applyDirectIndex(nearestUndefIndex);pos.splice(nearestUndefIndex,1,attachedLabel);this.holes.splice(this.holes.indexOf(nearestUndefIndex),1);return nearestUndefIndex}if(nearestOffset.noScaleSide===scale.NEG){tempArr=pos.splice(nearestUndefIndex+1,pos.length-1);pos.pop();tempArr.forEach(function(element){element&&element.applyShift(-1)});[].push.apply(pos,tempArr);_index=nearestUndefIndex;while(true){if(!pos[_index]){break}_index++}pos.push(0);this.repositionHoles();nearestOffset=nearestUndefined.call(this.holes,_index);_index+=nearestOffset.absValue*nearestOffset.noScaleSide;attachedLabel.applyDirectIndex(_index);pos.splice(_index,1,attachedLabel);this.repositionHoles();return pos.length-1}};return OccupancyMatrix}();exports["default"]={extension:function extension(Fusioncharts){Fusioncharts.addEventListener("instantiated",function(event){if(event.sender.getName()===CANVAS){var canvas=event.sender,handlers=void 0,crosslineOptions=void 0,crosslineCount=void 0;canvas.registerFactory("crossLineManager-zoomline",function(){var chart=event.sender.getFromEnv("chart"),chartName=chart&&chart.getName(),pageX=void 0,crossline=void 0;if(chartName&&chartInclusionList[chartName.toLowerCase()]){crosslineOptions=chart.config.crossline;if(crosslineOptions&&crosslineOptions.enabled!==0&&chart.config.useCrossline===1){crosslineCount=1}else{crosslineOptions&&(crosslineOptions.enabled=0);crosslineCount=0}(0,_lib.componentFactory)(canvas,CrossLine,"crossLine",crosslineCount,[crosslineOptions]);if(crosslineCount){crossline=canvas.getChildren("crossLine")[0];handlers=crossline.config.handlers;crossline.addExtEventListener("mousemove",handlers.onMouseMove,canvas);crossline.addExtEventListener("dragmove",function(e){var originalEvent=e.originalEvent,currentPageX=originalEvent.pageX||originalEvent.data[2];if(Math.abs(pageX-Math.round(currentPageX))<=2){return}handlers.onMouseOut(e);crossline.removeExtEventListener("mousemove",handlers.onMouseMove,canvas)},canvas);crossline.addExtEventListener("dragstart",function(e){var originalEvent=e.originalEvent;pageX=Math.round(originalEvent.pageX||originalEvent.data[0])},canvas);crossline.addExtEventListener("dragend",function(){crossline.addExtEventListener("mousemove",handlers.onMouseMove,canvas)},canvas);crossline.addExtEventListener("mouseout",function(e){if(Math.abs(pageX-Math.round(e.originalEvent.pageX))<=2){return}handlers.onMouseOut(e)},canvas);crossline.addExtEventListener("touchstart",handlers.onMouseMove,canvas)}else{if(hasTouch&&handlers){var config=crossline.config;config.docEventOutput&&config.docEventOutput.unlisten();config.docEventOutput=UNDEF}}}})}})},name:"crossline-manager",type:"extension",requiresFusionCharts:true}}}])});
//# sourceMappingURL=http://localhost:3052/3.13.1/map/eval/fusioncharts.zoomline.js.map