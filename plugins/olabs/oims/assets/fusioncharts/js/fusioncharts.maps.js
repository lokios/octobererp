(function(factory){if(typeof module==="object"&&typeof module.exports!=="undefined"){module.exports=factory}else{factory()}})(function(){if(arguments.length){setTimeout(function(){throw new Error("A deprecated way of resolving FusionCharts as a dependency is detected. Please use FusionCharts.addDep instead. For more information, please visit https://www.fusioncharts.com/dev/getting-started/plain-javascript/install-using-plain-javascript#install-fusioncharts-via-npm-5")},0)}(window["webpackJsonpFusionCharts"]=window["webpackJsonpFusionCharts"]||[]).push([[13],{715:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports.Maps=undefined;var _maps=__webpack_require__(716);var _maps2=_interopRequireDefault(_maps);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.Maps=_maps2["default"];exports["default"]={name:"maps",type:"package",requiresFusionCharts:true,extension:function extension(FusionCharts){return FusionCharts.addDep(_maps2["default"])}}},716:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _mscartesian=__webpack_require__(354);var _mscartesian2=_interopRequireDefault(_mscartesian);var _componentInterface=__webpack_require__(131);var _componentInterface2=_interopRequireDefault(_componentInterface);var _chartPaletteColors=__webpack_require__(272);var defaultPaletteOption=_interopRequireWildcard(_chartPaletteColors);var _domEvent=__webpack_require__(120);var _domEvent2=_interopRequireDefault(_domEvent);var _eventApi=__webpack_require__(124);var _lib=__webpack_require__(118);var _libGraphics=__webpack_require__(122);var _extAnnotation=__webpack_require__(184);var _extAnnotation2=_interopRequireDefault(_extAnnotation);var _raphael=__webpack_require__(121);var _raphael2=_interopRequireDefault(_raphael);var _mapsDataset=__webpack_require__(717);var _mapsDataset2=_interopRequireDefault(_mapsDataset);var _canvas=__webpack_require__(262);var _canvas2=_interopRequireDefault(_canvas);var _colorrange=__webpack_require__(580);var _colorrange2=_interopRequireDefault(_colorrange);var _legendmanager=__webpack_require__(585);var _legendmanager2=_interopRequireDefault(_legendmanager);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass)}var defaultPaletteOptions=(0,_raphael2["default"])({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},defaultPaletteOption),zeroCommaHundredStr="0,100",colorPaletteMapGlobal={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},eiMethodsGlobal={getMapName:function getMapName(){var chart=this,iapi=chart.jsVars.instanceAPI,mapName=iapi.getName().toLowerCase();return mapName},getEntityList:function getEntityList(){var chart=this,iapi=chart.jsVars.instanceAPI,datasets=iapi.getDatasets()||[],i=void 0,entities=void 0,dataset=void 0,len=datasets.length,entityList=[],data=void 0,entityObj=void 0,config=void 0,name=void 0;for(i=0;i<len;i++){dataset=datasets[i]||[];name=dataset.getName();if(name==="entities"){entities=dataset;break}}data=entities.components.data;len=data.length;for(i in data){if(data.hasOwnProperty(i)){entityObj=data[i]||{};config=entityObj.config||{};entityList.push({id:config.id,originalId:config.originalId||config.id,label:config.label,shortlabel:config.shortLabel,value:config.value,formattedValue:config.formattedValue,toolText:config.toolText})}}return entityList},getMapAttribute:function getMapAttribute(){var chartObj=this;(0,_eventApi.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".');return chartObj.getChartAttribute.apply(chartObj,arguments)},exportMap:function exportMap(){var chartObj=this;(0,_eventApi.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".');return chartObj.exportChart&&chartObj.exportChart.apply(chartObj,arguments)},addMarker:function addMarker(options){var iapi=this.jsVars.instanceAPI,datasets=iapi.getDatasets()||[],len=datasets.length,i=void 0,dataset=void 0,markers=void 0,name=void 0;for(i=0;i<len;i++){dataset=datasets[i]||[];name=dataset.getName();if(name==="markers"){markers=dataset;break}}if(markers&&!markers.addMarkerItem(options)){(0,_eventApi.raiseWarning)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")}},updateMarker:function updateMarker(id,options){var iapi=this.jsVars.instanceAPI,datasets=iapi.getDatasets()||[],len=datasets.length,i=void 0,dataset=void 0,markers=void 0,name=void 0;for(i=0;i<len;i++){dataset=datasets[i]||[];name=dataset.getName();if(name==="markers"){markers=dataset;break}}if(markers&&id){id=(id+BLANK).toLowerCase();markers.updateMarkerItem(id,options)}},removeMarker:function removeMarker(id){var iapi=this.jsVars.instanceAPI,datasets=iapi.getDatasets()||[],len=datasets.length,i=void 0,dataset=void 0,markers=void 0,name=void 0;for(i=0;i<len;i++){dataset=datasets[i]||[];name=dataset.getName();if(name==="markers"){markers=dataset;break}}if(id){id=(id+BLANK).toLowerCase();markers._removeMarkerItem(id)}}},UNDEF=void 0,DASH_DEF="none",COMMASPACE=", ",BLANK="",POSITION_BOTTOM="bottom",SHAPE_CIRCLE="circle",math=window.Math,mathMin=math.min,mathMax=math.max,isWithinCanvas=function isWithinCanvas(e,chart){var mousePos=(0,_lib.getMouseCoordinate)(chart.getFromEnv("chart-container"),e),chartX=mousePos.chartX,chartY=mousePos.chartY,chartConfig=chart.config,minX=chartConfig.canvasLeft,minY=chartConfig.canvasTop,maxX=chartConfig.canvasLeft+chartConfig.canvasWidth,maxY=chartConfig.canvasHeight+chartConfig.canvasTop;mousePos.insideCanvas=false;mousePos.originalEvent=e;if(chartX>minX&&chartX<maxX&&chartY>minY&&chartY<maxY){mousePos.insideCanvas=true}return mousePos};var ColorPalette=function(_ComponentInterface){_inherits(ColorPalette,_ComponentInterface);function ColorPalette(hash,index){_classCallCheck(this,ColorPalette);var _this=_possibleConstructorReturn(this,_ComponentInterface.call(this));_this.subpalette="";_this.key="";_this.index=index;var key;for(key in hash){_this.subpalette=defaultPaletteOptions[hash[key]];_this[key]=_this.subpalette instanceof Array?_this.subpalette[index]:_this.subpalette;_this.key=key}return _this}return ColorPalette}(_componentInterface2["default"]);var Maps=function(_MSCartesian){_inherits(Maps,_MSCartesian);function Maps(){_classCallCheck(this,Maps);var _this2=_possibleConstructorReturn(this,_MSCartesian.call(this));_this2.friendlyName="Map";_this2.revision=1;_this2.hasCanvas=true;_this2.standaloneInit=false;_this2.defaultDatasetType="maps";_this2.defaultSeriesType="geo";_this2.fireGroupEvent=true;_this2.legendposition="right";_this2.hasGradientLegend=true;_this2.isMap=true;_this2.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[zeroCommaHundredStr,zeroCommaHundredStr,zeroCommaHundredStr,zeroCommaHundredStr,zeroCommaHundredStr],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]};_this2.colorPaletteMap=colorPaletteMapGlobal;_this2.eiMethods=eiMethodsGlobal;_this2.registerFactory("legend",_legendmanager2["default"],["canvas"]);_this2.registerFactory("axis",function(){},["canvas"]);_this2.registerFactory("colormanager-decider",_colorrange2["default"],["legend"]);_this2.registerFactory("dataset",_mapsDataset2["default"],["colormanager-decider"]);_this2.registerFactory("canvas",_canvas2["default"]);return _this2}Maps.prototype._checkInvalidSpecificData=function _checkInvalidSpecificData(){this.config.invalid=false;return false};Maps.prototype.__setDefaultConfig=function __setDefaultConfig(){var config=this.config;!config.baseWidth&&(config.baseWidth=400);!config.baseHeight&&(config.baseHeight=300);!config.baseScaleFactor&&(config.baseScaleFactor=1)};Maps.getName=function getName(){return"maps"};Maps.getType=function getType(){return"chartAPI"};Maps.prototype.getName=function getName(){return this.config.name||"GEO"};Maps.prototype.getType=function getType(){return"chartAPI"};Maps.prototype.configureAttributes=function configureAttributes(dataObj){var iapi=this,colorPalette=iapi.getChildren("colorPalette")&&iapi.getChildren("colorPalette")[0],chartAttrs=void 0;chartAttrs=dataObj.chart=dataObj.chart||dataObj.graph||dataObj.map||{};iapi.jsonData=dataObj;(0,_lib.componentFactory)(iapi,_extAnnotation2["default"],"mapAnnotations");if(!colorPalette){colorPalette=new ColorPalette(this.colorPaletteMap,(chartAttrs.palette>0&&chartAttrs.palette<6?chartAttrs.palette:(0,_lib.pluckNumber)(iapi.paletteIndex,1))-1);iapi.attachChild(colorPalette,"colorPalette")}iapi.config.skipCanvasDrawing=true;_MSCartesian.prototype.configureAttributes.call(this,dataObj);iapi._parseBackgroundCosmetics()};Maps.prototype.parseChartAttr=function parseChartAttr(dataObj){var iapi=this,config=void 0,jsonData=iapi.jsonData,chartAttrs=jsonData.chart||jsonData.map,markerAttrs=jsonData.markers,palette=new ColorPalette(this.colorPaletteMap,(chartAttrs.palette>0&&chartAttrs.palette<6?chartAttrs.palette:(0,_lib.pluckNumber)(iapi.paletteIndex,1))-1),inCancolor=void 0,inCanFontFamily=void 0,inCanFontSize=void 0,style=void 0,entityBorderColor=(0,_lib.pluck)(chartAttrs.entitybordercolor,chartAttrs.bordercolor,palette.plotbordercolor),entityFillColor=(0,_lib.pluck)(chartAttrs.entityfillcolor,chartAttrs.fillcolor,palette.plotfillcolor),entityFillAlpha=(0,_lib.pluck)(chartAttrs.entityfillalpha,chartAttrs.fillalpha,palette.plotfillalpha),entityFillRatio=(0,_lib.pluck)(chartAttrs.entityfillratio,chartAttrs.fillratio,palette.plotfillratio),entityFillAngle=(0,_lib.pluck)(chartAttrs.entityfillangle,chartAttrs.fillangle,palette.plotfillangle),nullEntityColor=(0,_lib.pluck)(chartAttrs.nullentityfillcolor,chartAttrs.nullentitycolor,entityFillColor),markerDataEnabled=(0,_lib.pluckNumber)(chartAttrs.usevaluesformarkers,jsonData.markers&&jsonData.markers.items&&jsonData.markers.items.length,!(jsonData.markers&&jsonData.markers.application&&jsonData.markers.application.length&&jsonData.markers.definition&&jsonData.markers.definition.length));_MSCartesian.prototype.parseChartAttr.call(this,dataObj);config=iapi.config;config.origMarginTop=(0,_lib.pluckNumber)(chartAttrs.charttopmargin,chartAttrs.maptopmargin,11);config.origMarginLeft=(0,_lib.pluckNumber)(chartAttrs.chartleftmargin,chartAttrs.mapleftmargin,11);config.origMarginBottom=(0,_lib.pluckNumber)(chartAttrs.chartbottommargin,chartAttrs.mapbottommargin,11);config.origMarginRight=(0,_lib.pluckNumber)(chartAttrs.chartrightmargin,chartAttrs.maprightmargin,11);config.labelsOnTop=(0,_lib.pluckNumber)(chartAttrs.entitylabelsontop,1);style=config.style;inCancolor=style.inCancolor;inCanFontFamily=style.inCanfontFamily;inCanFontSize=style.inCanfontSize;config.entityOpts={baseScaleFactor:config.baseScaleFactor,dataLabels:{style:{fontFamily:inCanFontFamily,fontSize:inCanFontSize,lineHeight:style.inCanLineHeight,color:style.inCancolor}},fillColor:entityFillColor,fillAlpha:entityFillAlpha,fillRatio:entityFillRatio,fillAngle:entityFillAngle,borderColor:entityBorderColor,borderAlpha:(0,_lib.pluck)(chartAttrs.entityborderalpha,chartAttrs.borderalpha,iapi.borderAlpha,"100"),borderThickness:(0,_lib.pluckNumber)(chartAttrs.showentityborder,chartAttrs.showborder,1)?(0,_lib.pluckNumber)(chartAttrs.entityborderthickness,chartAttrs.borderthickness,1):0,scaleBorder:(0,_lib.pluckNumber)(chartAttrs.scaleentityborder,chartAttrs.scaleborder,0),hoverFillColor:(0,_lib.pluck)(chartAttrs.entityfillhovercolor,chartAttrs.hoverfillcolor,chartAttrs.hovercolor,palette.plothoverfillcolor),hoverFillAlpha:(0,_lib.pluck)(chartAttrs.entityfillhoveralpha,chartAttrs.hoverfillalpha,chartAttrs.hoveralpha,palette.plothoverfillalpha),hoverFillRatio:(0,_lib.pluck)(chartAttrs.entityfillhoverratio,chartAttrs.hoverfillratio,chartAttrs.hoverratio,palette.plothoverfillratio),hoverFillAngle:(0,_lib.pluck)(chartAttrs.entityfillhoverangle,chartAttrs.hoverfillangle,chartAttrs.hoverangle,palette.plothoverfillangle),hoverBorderThickness:(0,_lib.pluck)(chartAttrs.entityborderhoverthickness,chartAttrs.hoverborderthickness),hoverBorderColor:(0,_lib.pluck)(chartAttrs.entityborderhovercolor,entityBorderColor,palette.plotbordercolor),hoverBorderAlpha:(0,_lib.pluck)(chartAttrs.entityborderhoveralpha,palette.plotborderalpha),nullEntityColor:nullEntityColor,nullEntityAlpha:(0,_lib.pluck)(chartAttrs.nullentityfillalpha,chartAttrs.nullentityalpha,entityFillAlpha),nullEntityRatio:(0,_lib.pluck)(chartAttrs.nullentityfillratio,chartAttrs.nullentityratio,entityFillRatio),nullEntityAngle:(0,_lib.pluck)(chartAttrs.nullentityfillangle,chartAttrs.nullentityangle,entityFillAngle),connectorColor:(0,_lib.pluck)(chartAttrs.labelconnectorcolor,chartAttrs.connectorcolor,inCancolor),connectorAlpha:(0,_lib.pluck)(chartAttrs.labelconnectoralpha,chartAttrs.connectoralpha,"100"),connectorThickness:(0,_lib.pluckNumber)(chartAttrs.labelconnectorthickness,chartAttrs.borderthickness,1),showHoverEffect:(0,_lib.pluckNumber)(chartAttrs.showentityhovereffect,chartAttrs.usehovercolor,chartAttrs.showhovereffect,1),hoverOnNull:(0,_lib.pluckNumber)(chartAttrs.hoveronnull,chartAttrs.entityhoveronnull,1),labelPadding:(0,_lib.pluckNumber)(chartAttrs.labelpadding,5),showLabels:(0,_lib.pluckNumber)(chartAttrs.showlabels,1),labelsOnTop:(0,_lib.pluckNumber)(chartAttrs.entitylabelsontop,1),includeNameInLabels:(0,_lib.pluckNumber)(chartAttrs.includenameinlabels,1),includeValueInLabels:(0,_lib.pluckNumber)(chartAttrs.includevalueinlabels,0),useSNameInTooltip:(0,_lib.pluckNumber)(chartAttrs.usesnameintooltip,0),useShortName:(0,_lib.pluckNumber)(chartAttrs.usesnameinlabels,1),labelSepChar:(0,_lib.pluck)(chartAttrs.labelsepchar,COMMASPACE),showTooltip:(0,_lib.pluckNumber)(chartAttrs.showentitytooltip,chartAttrs.showtooltip,1),tooltipSepChar:(0,_lib.pluck)(chartAttrs.tooltipsepchar,", "),tooltext:chartAttrs.entitytooltext,hideNullEntities:(0,_lib.pluckNumber)(chartAttrs.hidenullentities,0),showHiddenEntityBorder:(0,_lib.pluckNumber)(chartAttrs.showhiddenentityborder,1),showNullEntityBorder:(0,_lib.pluckNumber)(chartAttrs.shownullentityborder,1),hiddenEntityColor:(0,_lib.pluck)(chartAttrs.hiddenentitycolor,chartAttrs.hiddenentityfillcolor,chartAttrs.hiddenentityalpha||chartAttrs.hiddenentityfillalpha?nullEntityColor:"ffffff"),hiddenEntityAlpha:(0,_lib.pluck)(chartAttrs.hiddenentityalpha,chartAttrs.hiddenentityfillalpha,.001),shadow:(0,_lib.pluckNumber)(chartAttrs.showshadow,iapi.defaultPlotShadow,palette.shadow)};config.markerOpts={dataLabels:{style:{fontFamily:(0,_lib.pluck)(chartAttrs.markerfont,inCanFontFamily),fontSize:(0,_lib.pluckNumber)(chartAttrs.markerfontsize,parseInt(inCanFontSize,10)),fontColor:(0,_lib.pluck)(chartAttrs.markerfontcolor,inCancolor)}},showTooltip:(0,_lib.pluckNumber)(chartAttrs.showmarkertooltip,chartAttrs.showtooltip,1),showLabels:(0,_lib.pluckNumber)(chartAttrs.showmarkerlabels,chartAttrs.showlabels,1),showHoverEffect:(0,_lib.pluckNumber)(chartAttrs.showmarkerhovereffect,1),labelPadding:(0,_lib.pluck)(chartAttrs.markerlabelpadding,"5"),labelWrapWidth:(0,_lib.pluckNumber)(chartAttrs.markerlabelwrapwidth,0),labelWrapHeight:(0,_lib.pluckNumber)(chartAttrs.markerlabelwrapheight,0),fillColor:(0,_lib.pluck)(chartAttrs.markerfillcolor,chartAttrs.markerbgcolor,palette.markerfillcolor),fillAlpha:(0,_lib.pluck)(chartAttrs.markerfillalpha,palette.markerfillalpha),fillAngle:(0,_lib.pluck)(chartAttrs.markerfillangle,palette.markerfillangle),fillRatio:(0,_lib.pluck)(chartAttrs.markerfillratio,palette.markerfillratio),fillPattern:(0,_lib.pluck)(chartAttrs.markerfillpattern,palette.markerbgpattern),hoverFillColor:chartAttrs.markerfillhovercolor,hoverFillAlpha:chartAttrs.markerfillhoveralpha,hoverFillRatio:chartAttrs.markerfillhoverratio,hoverFillAngle:chartAttrs.markerfillhoverangle,borderThickness:(0,_lib.pluck)(chartAttrs.markerborderthickness,1),borderColor:(0,_lib.pluck)(chartAttrs.markerbordercolor,palette.markerbordercolor),borderAlpha:(0,_lib.pluckNumber)(chartAttrs.markerborderalpha,palette.markerborderalpha),hoverBorderThickness:chartAttrs.markerborderhoverthickness,hoverBorderColor:chartAttrs.markerborderhovercolor,hoverBorderAlpha:chartAttrs.markerborderhoveralpha,radius:(0,_lib.pluckNumber)(chartAttrs.markerradius&&(0,_lib.trimString)(chartAttrs.markerradius),7),shapeId:(0,_lib.pluck)(chartAttrs.defaultmarkershape,SHAPE_CIRCLE),labelSepChar:(0,_lib.pluck)(chartAttrs.labelsepchar,COMMASPACE),tooltipSepChar:(0,_lib.pluck)(chartAttrs.tooltipsepchar,", "),autoScale:(0,_lib.pluckNumber)(chartAttrs.autoscalemarkers,0),tooltext:(0,_lib.pluck)(markerAttrs&&markerAttrs.tooltext,chartAttrs.markertooltext),dataEnabled:markerDataEnabled,valueToRadius:(0,_lib.pluckNumber)(chartAttrs.markerradiusfromvalue,1),valueMarkerAlpha:(0,_lib.pluck)(chartAttrs.valuemarkeralpha,"75"),hideNull:(0,_lib.pluckNumber)(chartAttrs.hidenullmarkers,0),nullRadius:(0,_lib.pluckNumber)(chartAttrs.nullmarkerradius,chartAttrs.markerradius,7),adjustViewPort:(0,_lib.pluckNumber)(chartAttrs.adjustviewportformarkers,0),startAngle:(0,_lib.pluckNumber)(chartAttrs.markerstartangle,90),maxRadius:(0,_lib.pluckNumber)(chartAttrs.maxmarkerradius,0),minRadius:(0,_lib.pluckNumber)(chartAttrs.minmarkerradius,0),applyAll:(0,_lib.pluckNumber)(chartAttrs.applyallmarkers,0),shadow:(0,_lib.pluckNumber)(chartAttrs.showmarkershadow,chartAttrs.showshadow,0)};config.connectorOpts={showHoverEffect:(0,_lib.pluckNumber)(chartAttrs.showconnectorhovereffect,1),thickness:(0,_lib.pluckNumber)(chartAttrs.connectorthickness,chartAttrs.markerconnthickness,"2"),color:(0,_lib.pluck)(chartAttrs.connectorcolor,chartAttrs.markerconncolor,palette.markerbordercolor),alpha:(0,_lib.pluck)(chartAttrs.connectoralpha,chartAttrs.markerconnalpha,"100"),hoverThickness:(0,_lib.pluckNumber)(chartAttrs.connectorhoverthickness,chartAttrs.connectorthickness,chartAttrs.markerconnthickness,"2"),hoverColor:(0,_lib.pluck)(chartAttrs.connectorhovercolor,chartAttrs.connectorcolor,chartAttrs.markerconncolor,palette.markerbordercolor),hoverAlpha:(0,_lib.pluck)(chartAttrs.connectorhoveralpha,chartAttrs.connectoralpha,chartAttrs.markerconnalpha,"100"),dashed:(0,_lib.pluckNumber)(chartAttrs.connectordashed,chartAttrs.markerconndashed,0),dashLen:(0,_lib.pluckNumber)(chartAttrs.connectordashlen,chartAttrs.markerconndashlen,3),dashGap:(0,_lib.pluckNumber)(chartAttrs.connectordashgap,chartAttrs.markerconndashgap,2),font:(0,_lib.pluck)(chartAttrs.connectorfont,chartAttrs.markerconnfont,inCanFontFamily),fontColor:(0,_lib.pluck)(chartAttrs.connectorfontcolor,chartAttrs.markerconnfontcolor,inCancolor),fontSize:(0,_lib.pluckNumber)(chartAttrs.connectorfontsize,chartAttrs.markerconnfontsize,parseInt(inCanFontSize,10)),showLabels:(0,_lib.pluckNumber)(chartAttrs.showconnectorlabels,chartAttrs.showmarkerlabels,chartAttrs.showlabels,1),labelBgColor:(0,_lib.pluck)(chartAttrs.connectorlabelbgcolor,chartAttrs.markerconnlabelbgcolor,palette.plotfillcolor),labelBorderColor:(0,_lib.pluck)(chartAttrs.connectorlabelbordercolor,chartAttrs.markerconnlabelbordercolor,palette.markerbordercolor),shadow:(0,_lib.pluckNumber)(chartAttrs.showconnectorshadow,chartAttrs.showmarkershadow,chartAttrs.showshadow,0),showTooltip:(0,_lib.pluckNumber)(chartAttrs.showconnectortooltip,chartAttrs.showmarkertooltip,chartAttrs.showtooltip,1),tooltext:(0,_lib.pluck)(markerAttrs&&markerAttrs.connectortooltext,chartAttrs.connectortooltext),hideOpen:(0,_lib.pluckNumber)(chartAttrs.hideopenconnectors,1)};config.adjustViewPortForMarkers=(0,_lib.pluckNumber)(chartAttrs.adjustviewportformarkers,markerDataEnabled)};Maps.prototype._attachMouseEvents=function _attachMouseEvents(){var iapi=this,listeners=iapi.getFromEnv("eventListeners"),containerElem=iapi.getFromEnv("chart-container");_domEvent2["default"].unlisten(containerElem,_lib.hasTouch?"touchstart":"mousemove",Maps.searchMouseMove);listeners.push(_domEvent2["default"].listen(containerElem,"touchstart mousemove",Maps.searchMouseMove,iapi))};Maps.searchMouseMove=function searchMouseMove(e){var mousePos=void 0,chart=e.data,chartConfig=chart.config,lastMouseCoordinate={};if(!chart.getFromEnv("chart-container")){return}if((mousePos=isWithinCanvas(e,chart))&&mousePos.insideCanvas){chartConfig.lastMouseEvent=e;lastMouseCoordinate={x:mousePos.chartX,y:mousePos.chartY};chart._searchNearestNeighbour(lastMouseCoordinate)}};Maps.prototype._searchNearestNeighbour=function _searchNearestNeighbour(point){var iapi=this,datasets=iapi.getDatasets(),markers=datasets[1],kdPoint=void 0;if(markers){if(!markers.components.kDTree){return}kdPoint=markers.getElement(point);if(kdPoint){iapi.config.lastHoveredPoint!==kdPoint&&markers.highlightPoint(kdPoint)}else{markers.highlightPoint(false)}}};Maps.prototype._createLayers=function _createLayers(){_MSCartesian.prototype._createLayers.call(this);this._attachMouseEvents()};Maps.prototype._parseBackgroundCosmetics=function _parseBackgroundCosmetics(){var iapi=this,background=iapi.getChildren("background")[0],config=background.config,palette=iapi.getChildren("colorPalette")[0],chartAttrs=iapi.getFromEnv("chart-attrib"),showBorder=void 0;showBorder=config.showBorder=(0,_lib.pluckNumber)(chartAttrs.showcanvasborder,1);config.borderWidth=showBorder?(0,_lib.pluckNumber)(chartAttrs.canvasborderthickness,1):0;config.borderRadius=config.borderRadius=(0,_lib.pluckNumber)(chartAttrs.canvasborderradius,0);config.borderDashStyle=config.borderDashStyle=(0,_lib.pluckNumber)(chartAttrs.borderdashed,0)?(0,_lib.getDashStyle)((0,_lib.pluckNumber)(chartAttrs.borderdashlen,4),(0,_lib.pluckNumber)(chartAttrs.borderdashgap,2)):DASH_DEF;config.borderAlpha=(0,_lib.pluck)(chartAttrs.canvasborderalpha,palette.borderAlpha);config.borderColor=config.borderColor=(0,_libGraphics.convertColor)((0,_lib.pluck)(chartAttrs.canvasbordercolor,palette&&palette.borderColor),config.borderAlpha)};Maps.prototype._getBackgroundCosmetics=function _getBackgroundCosmetics(){var iapi=this,chartAttrs=iapi.getFromEnv("chart-attrib")||iapi.jsonData.map,palette=iapi.getChildren("colorPalette")[0];return{FCcolor:{color:(0,_lib.pluck)(chartAttrs.bgcolor,chartAttrs.canvasbgcolor,palette.bgcolor),alpha:(0,_lib.pluck)(chartAttrs.bgalpha,chartAttrs.canvasbgalpha,palette.bgalpha),angle:(0,_lib.pluck)(chartAttrs.bgangle,chartAttrs.canvasbgangle,palette.bgangle),ratio:(0,_lib.pluck)(chartAttrs.bgratio,chartAttrs.canvasbgratio,palette.bgratio)}}};Maps.prototype._parseCanvasCosmetics=function _parseCanvasCosmetics(){_MSCartesian.prototype._parseCanvasCosmetics.call(this);var iapi=this,config=iapi.config,chartAttrs=iapi.getFromEnv("chart-attrib")||iapi.jsonData.map,canvasConfig=iapi.getChildren("canvas")[0].config;config.origMarginTop=(0,_lib.pluckNumber)(chartAttrs.maptopmargin,11);config.origMarginLeft=(0,_lib.pluckNumber)(chartAttrs.mapleftmargin,11);config.origMarginBottom=(0,_lib.pluckNumber)(chartAttrs.mapbottommargin,11);config.origMarginRight=(0,_lib.pluckNumber)(chartAttrs.maprightmargin,11);config.origCanvasLeftMargin=(0,_lib.pluckNumber)(chartAttrs.canvasleftmargin,0);config.origCanvasRightMargin=(0,_lib.pluckNumber)(chartAttrs.canvasrightmargin,0);config.origCanvasTopMargin=(0,_lib.pluckNumber)(chartAttrs.canvastopmargin,0);config.origCanvasBottomMargin=(0,_lib.pluckNumber)(chartAttrs.canvasbottommargin,0);canvasConfig.canvasBorderRadius=(0,_lib.pluckNumber)(chartAttrs.canvasborderradius,0);canvasConfig.origCanvasTopPad=(0,_lib.pluckNumber)(chartAttrs.canvastoppadding,0);canvasConfig.origCanvasBottomPad=(0,_lib.pluckNumber)(chartAttrs.canvasbottompadding,0);canvasConfig.origCanvasLeftPad=(0,_lib.pluckNumber)(chartAttrs.canvasleftpadding,0);canvasConfig.origCanvasRightPad=(0,_lib.pluckNumber)(chartAttrs.canvasrightpadding,0)};Maps.prototype.preliminaryScaling=function preliminaryScaling(){var iapi=this,jsonData=iapi.jsonData,markerArray=jsonData.markers&&jsonData.markers.items||[],i=markerArray&&markerArray.length||0,minX=Infinity,minY=Infinity,maxX=-Infinity,maxY=-Infinity,x=void 0,y=void 0,item=void 0;while(i--){item=markerArray[i];x=Number(item.x);y=Number(item.y);minX=mathMin(minX,x);minY=mathMin(minY,y);maxX=mathMax(maxX,x);maxY=mathMax(maxY,y)}return{x:minX,y:minY,x1:maxX,y1:maxY}};Maps.prototype.getScalingParameters=function getScalingParameters(wg,hg,wv,hv){var iapi=this,aspR=wg/hg,widthScaleR=wv/(wg*iapi.config.baseScaleFactor),heightScaleR=hv/(hg*iapi.config.baseScaleFactor),translateX=0,translateY=0,scaleFactor=void 0,strokeWidth=void 0;if(widthScaleR>heightScaleR){scaleFactor=heightScaleR;translateX+=(wv-hv*aspR)/2;strokeWidth=200/(hg*scaleFactor)}else{scaleFactor=widthScaleR;translateY+=(hv-wv/aspR)/2;strokeWidth=200/(wg*scaleFactor)}return{scaleFactor:scaleFactor,strokeWidth:strokeWidth,translateX:translateX,translateY:translateY}};Maps.prototype.calculateMarkerBounds=function calculateMarkerBounds(scaleFactor,xOffset,yOffset){var iapi=this,config=iapi.config,markerOptions=config.markerOpts,datasets=iapi.getDatasets(),limits=iapi.getDataLimits(),dataMin=limits.dataMin,dataMax=limits.dataMax,hideNull=markerOptions.hideNull,nullRadius=markerOptions.nullRadius,v2r=markerOptions.valueToRadius,markerDataset=void 0,markerConf=void 0,minR=void 0,maxR=void 0,markerArray=void 0,i=void 0,name=void 0,dataset=void 0,len=void 0,minX=Infinity,minY=Infinity,maxX=-Infinity,maxY=-Infinity,x=void 0,y=void 0,r=void 0,definition=void 0,item=void 0;for(i=0,len=datasets.length;i<len;i++){dataset=datasets[i];name=dataset.getName();if(name==="markers"){markerDataset=dataset}}if(markerDataset){markerDataset.calculateMarkerRadiusLimits();markerConf=markerDataset.config||{};minR=markerConf.minRadius;maxR=markerConf.maxRadius;markerArray=markerDataset.components&&markerDataset.components.markerObjs||{};for(i in markerArray){item=markerArray[i];config=item.config;definition=config.definition||{};if(config.cleanValue!==null){if(v2r&&definition.radius===UNDEF){config.radius=minR+(maxR-minR)*(config.cleanValue-dataMin)/(dataMax-dataMin)}}else{if(hideNull){config.__hideMarker=true}else if(config.radius===null){config.radius=nullRadius}continue}r=Number(config.radius);x=(Number(definition.x)+xOffset)*scaleFactor;y=(Number(definition.y)+yOffset)*scaleFactor;minX=mathMin(minX,x-r);minY=mathMin(minY,y-r);maxX=mathMax(maxX,x+r);maxY=mathMax(maxY,y+r)}}return{x:minX,y:minY,x1:maxX,y1:maxY}};Maps.prototype._spaceManager=function _spaceManager(){var availableHeight=void 0,iapi=this,config=iapi.config,legend=iapi.getChildren("legend")&&iapi.getChildren("legend")[0],legendPosition=legend&&legend.config.legendPos,chartAttrs=iapi.getFromEnv("chart-attrib"),showBorder=config.showBorder,translateX=config.origMarginLeft,translateY=config.origMarginTop,wg=iapi.config.baseWidth,hg=iapi.config.baseHeight,scalingParams=void 0,wv=void 0,hv=void 0,sFactor=void 0,extraMarkerSpace={},xDifference=0,yDifference=0,initHv=void 0,initWv=void 0,allottedSpace=void 0,topSpace=void 0,markerOptions=config.markerOpts,chartBorderWidth=config.borderWidth=showBorder?(0,_lib.pluckNumber)(chartAttrs.borderthickness,1):0;iapi._allocateSpace({top:chartBorderWidth,bottom:chartBorderWidth,left:chartBorderWidth,right:chartBorderWidth});iapi._allocateSpace(iapi._manageActionBarSpace&&iapi._manageActionBarSpace(config.availableHeight*.225)||{});if(legendPosition==="right"){allottedSpace=config.canvasWidth*.3}else{allottedSpace=config.canvasHeight*.3}config.showLegend&&iapi._manageLegendSpace(allottedSpace);availableHeight=legendPosition===POSITION_BOTTOM?config.canvasHeight*.225:config.canvasWidth*.225;topSpace=iapi._manageChartMenuBar(availableHeight);wv=config.canvasWidth;hv=config.canvasHeight;if(markerOptions.dataEnabled){if(config.adjustViewPortForMarkers){extraMarkerSpace=iapi.preliminaryScaling();if(extraMarkerSpace.x1>wg){wg=extraMarkerSpace.x1}if(extraMarkerSpace.x<0){wg+=-extraMarkerSpace.x;xDifference=-extraMarkerSpace.x}if(extraMarkerSpace.y1>hg){hg=extraMarkerSpace.y1}if(extraMarkerSpace.y<0){hg+=-extraMarkerSpace.y;yDifference=-extraMarkerSpace.y}scalingParams=iapi.getScalingParameters(wg,hg,wv,hv);extraMarkerSpace=iapi.calculateMarkerBounds(scalingParams.scaleFactor*iapi.config.baseScaleFactor,xDifference,yDifference);initHv=hv;initWv=wv;if(extraMarkerSpace.x<0){translateX+=-extraMarkerSpace.x;wv+=extraMarkerSpace.x}if(extraMarkerSpace.y<0){translateY+=-extraMarkerSpace.y;hv+=extraMarkerSpace.y}if(extraMarkerSpace.x1>initWv){wv-=extraMarkerSpace.x1-initWv}if(extraMarkerSpace.y1>initHv){hv-=extraMarkerSpace.y1-initHv}}else{scalingParams=iapi.getScalingParameters(wg,hg,wv,hv);iapi.calculateMarkerBounds(scalingParams.scaleFactor*iapi.config.baseScaleFactor,xDifference,yDifference)}scalingParams=iapi.getScalingParameters(wg,hg,wv,hv);translateX+=xDifference*scalingParams.scaleFactor*iapi.config.baseScaleFactor;translateY+=yDifference*scalingParams.scaleFactor*iapi.config.baseScaleFactor}else{scalingParams=iapi.getScalingParameters(wg,hg,wv,hv)}iapi.config.scalingParams=scalingParams;sFactor=scalingParams.scaleFactor;scalingParams.translateX=scalingParams.translateX+translateX;scalingParams.translateY=scalingParams.translateY+translateY+topSpace.top||0;scalingParams.sFactor=sFactor*iapi.config.baseScaleFactor*100/100;scalingParams.transformStr=["t",scalingParams.translateX,",",scalingParams.translateY,"s",sFactor,",",sFactor,",0,0"].join("");iapi.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:scalingParams.translateX?scalingParams.translateX:0,grpyshift:scalingParams.translateY?scalingParams.translateY:0,xscale:(sFactor?sFactor*iapi.config.baseScaleFactor:1)*100,yscale:(sFactor?sFactor*iapi.config.baseScaleFactor:1)*100,scaletext:1,options:{useTracker:true}};iapi.getChildren("mapAnnotations")[0].clear();iapi.getChildren("mapAnnotations")[0].configureAttributes()};Maps.prototype.getDataLimits=function getDataLimits(){var iapi=this,datasets=iapi.getDatasets(),length=datasets.length,dataset=void 0,dataMin=+Infinity,dataMax=-Infinity,limits=void 0,i=void 0;for(i=0;i<length;i++){dataset=datasets[i];limits=dataset.getDataLimits();dataMin=mathMin(dataMin,limits.min);dataMax=mathMax(dataMax,limits.max)}return{dataMin:dataMin,dataMax:dataMax}};Maps.prototype.getEntityPaths=function getEntityPaths(copy){var returnObj={},ents=this.config.entities,id=void 0;if(copy){for(id in ents){returnObj[id]=ents[id]}return returnObj}else{return ents}};Maps.prototype.checkComplete=function checkComplete(){var iapi=this;if(iapi.config.entityFlag&&iapi.config.entitiesReady){iapi.config.entityFlag=false;iapi.config.markersDrawn=true;iapi.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:iapi})}};return Maps}(_mscartesian2["default"]);exports["default"]=Maps},717:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;exports["default"]=function(chart){var mapGroupManager,dataObj=chart.getFromEnv("dataSource"),entityJSONData=dataObj.data||{},markerJSONData=dataObj.markers;(0,_lib.componentFactory)(chart,_maps2["default"],"mapGroup");mapGroupManager=chart.getChildren("mapGroup")[0];(0,_lib.datasetFactory)(mapGroupManager,_entities2["default"],"entities",1,[entityJSONData]);if(markerJSONData){(0,_lib.datasetFactory)(mapGroupManager,_markers2["default"],"markers",1,[markerJSONData])}else{chart.getDatasets()[1]&&chart.getDatasets()[1].remove()}};var _lib=__webpack_require__(118);var _entities=__webpack_require__(718);var _entities2=_interopRequireDefault(_entities);var _markers=__webpack_require__(720);var _markers2=_interopRequireDefault(_markers);var _maps=__webpack_require__(721);var _maps2=_interopRequireDefault(_maps);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}},718:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _componentInterface=__webpack_require__(131);var _componentInterface2=_interopRequireDefault(_componentInterface);var _extAnnotation=__webpack_require__(184);var _extAnnotation2=_interopRequireDefault(_extAnnotation);var _dependencyManager=__webpack_require__(125);var _mapEntitiesAnimation=__webpack_require__(719);var _mapEntitiesAnimation2=_interopRequireDefault(_mapEntitiesAnimation);var _lib=__webpack_require__(118);var _libGraphics=__webpack_require__(122);var _schedular=__webpack_require__(129);var _redraphaelShapes=__webpack_require__(377);var _redraphaelShapes2=_interopRequireDefault(_redraphaelShapes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass)}var Raphael=(0,_dependencyManager.getDep)("redraphael","plugin"),UNDEF=void 0,userAgent=window.navigator.userAgent,isIE=/msie/i.test(userAgent)&&!window.opera,COMMA=",",BLANK="",POSITION_TOP="top",POSITION_BOTTOM="bottom",POSITION_RIGHT="right",POSITION_LEFT="left",POSITION_MIDDLE="middle",POSITION_CENTER="center",CRISP="crisp",math=window.Math,mathMin=math.min,mathMax=math.max,isStrokeReg=/stroke/gi,isWebKit=/AppleWebKit/.test(userAgent),mathCeil=math.ceil,colorize=function colorize(original,obj){var col=!obj?{FCcolor:original}:(0,_lib.extend2)(original.FCcolor,obj,false,true);col.toString=_lib.toRaphaelColor;return col},pruneStrokeAttrs=function pruneStrokeAttrs(obj,thicknessModifier){var key=void 0,returnObj={};thicknessModifier=thicknessModifier||1;if(!obj||(typeof obj==="undefined"?"undefined":_typeof(obj))!=="object"){return returnObj}for(key in obj){if(!isStrokeReg.test(key)){if(key==="stroke-width"){returnObj[key]=Number(obj[key])/thicknessModifier;if(isWebKit){returnObj[key]=returnObj[key]&&mathCeil(returnObj[key])||0}}else{returnObj[key]=obj[key]}}}return returnObj},getTextWrapWidth={right:function right(){return arguments[1]},left:function left(w,x){return w-x},center:function center(w,x){return mathMin(x,w-x)*2}},getTextWrapHeight={top:function top(){return arguments[1]},middle:function middle(h,y){return mathMin(y,h-y)*2},bottom:function bottom(h,y){return h-y}},convertArrayToIdMap=function convertArrayToIdMap(arr){var i=arr&&arr.length||0,ret={},item=void 0;while(i--){item=arr[i];if(item.id!==UNDEF){ret[item.id.toLowerCase()]=item}}return ret};(0,_dependencyManager.addDep)({name:"mapsAnimation",type:"animationRule",extension:_mapEntitiesAnimation2["default"]});(0,_redraphaelShapes2["default"])(Raphael);var Entities=function(_ComponentInterface){_inherits(Entities,_ComponentInterface);function Entities(){_classCallCheck(this,Entities);var _this=_possibleConstructorReturn(this,_ComponentInterface.call(this));_this.components={};return _this}Entities.prototype.getName=function getName(){return"entities"};Entities.prototype.getType=function getType(){return"dataset"};Entities.prototype.configureAttributes=function configureAttributes(entityJSONDataOb){if(!entityJSONDataOb){return}this.JSONData={data:entityJSONDataOb};var dataset=this,chart=dataset.getFromEnv("chart"),rawData=chart.jsonData,conf=dataset.config,mapAttrs=rawData.map||rawData.chart,entityJSONData=void 0,entities=void 0,dataItem=void 0,entityItem=void 0,item=void 0,minMaxArray=[],minMaxArrayLen=void 0,i=void 0,d=void 0,colorManager=dataset.getFromEnv("colorManager"),entityDef=rawData.entitydef||[];if(!conf.attachEvent&&colorManager){dataset.addExtEventListener("legendUpdate",function(){d=arguments[1];if(d.component==="legend"){dataset.legendInteractivity(d.legendItem,d.colorObj)}else{minMaxArray=d.maxMinArray;minMaxArrayLen=minMaxArray.length;for(i=0;i<minMaxArrayLen;i++){dataset.updateEntityColors(minMaxArray[i].min,minMaxArray[i].max)}}},colorManager);conf.attachEvent=true}if(rawData.data&&rawData.data[0]&&rawData.data[0].data){entityJSONData=dataset.JSONData=rawData.data[0].data||[]}else{entityJSONData=dataset.JSONData=rawData.data||[]}conf.useSNameAsId=(0,_lib.pluckNumber)(mapAttrs.usesnameasid,0);this._redefineEntities(entityDef);entities=dataset.components.data;conf.showTooltip=(0,_lib.pluckNumber)(mapAttrs.showtooltip,1);conf.showHoverEffect=(0,_lib.pluckNumber)(mapAttrs.showhovereffect,0);entityJSONData=convertArrayToIdMap(entityJSONData);dataset.calculateDataLimits();!rawData.colorrange&&dataset.detachChild(dataset.getChildren("colorRange")&&dataset.getChildren("colorRange")[0].getId());for(item in entities){dataItem=entityJSONData[item];entityItem=entities[item];if(dataItem){this._configureEntity(item,entityItem,(0,_lib.imprint)(Entities._sanitizeEntityOptions((0,_lib.extend2)({},dataItem)),entityItem.config))}else{this._configureEntity(item,entityItem,entityItem.config)}}};Entities.prototype.updateEntityColors=function updateEntityColors(minValue,maxValue){var dataset=this,entities=dataset.components.data,chart=dataset.getFromEnv("chart"),entityObj=void 0,config=void 0,value=void 0,name=void 0,alphaArr=void 0,visibleEntityAttr=void 0,hiddenAttr={"fill-opacity":0};for(name in entities){entityObj=entities[name];config=entityObj.config;value=config.cleanValue;alphaArr=config.alphaArr||[];visibleEntityAttr={"fill-opacity":alphaArr[0]/100||1};if(value<minValue||value>maxValue){Entities.setCustomAttrs(entityObj,hiddenAttr,chart);entityObj.hidden=true}else{entityObj.hidden=false;Entities.setCustomAttrs(entityObj,visibleEntityAttr,chart)}}};Entities.prototype.legendInteractivity=function legendInteractivity(legendItem,entityColorObj){var dataset=this,chart=dataset.getFromEnv("chart"),entities=dataset.components.data,i=void 0,entity=void 0,config=legendItem.config,visible=legendItem.hasState("hidden"),cleanValue=void 0,colorRange=dataset.getFromEnv("colorManager"),entityAttrs=void 0,visibleEntityAttr={},applyAttr=void 0,hiddenAttr={"fill-opacity":0},colorObj=void 0;chart.getFromEnv("animationManager").setAnimationState("legendInteraction");for(i in entities){if(entities.hasOwnProperty(i)){entity=entities[i];config=entity.config;cleanValue=config.cleanValue;colorObj=colorRange.getColorObj(cleanValue);entityAttrs=config.visibleEntityAttr;visibleEntityAttr["fill-opacity"]=entityAttrs["fill-opacity"];applyAttr=!visible?hiddenAttr:visibleEntityAttr;if(entityColorObj.code===(!colorObj.outOfRange&&colorObj.code)){entity.hidden=!visible;Entities.setCustomAttrs(entity,applyAttr,chart);if(!visible){legendItem.setLegendState("hidden")}else{legendItem&&legendItem.removeLegendState("hidden")}}}}};Entities.setCustomAttrs=function setCustomAttrs(entityObj,attrs){var elements=void 0,graphic=void 0;if(entityObj){elements=entityObj.graphics;graphic=elements.outlines;graphic.attr(attrs)}};Entities.prototype.calculateDataLimits=function calculateDataLimits(){var dataset=this,chart=dataset.getFromEnv("chart"),conf=dataset.config,jsonData=chart.jsonData,dataArr=jsonData.data||[],numberFormatter=this.getFromEnv("number-formatter"),cleanValue=void 0,value=void 0,minValue=+Infinity,maxValue=-Infinity,len=void 0,i=void 0;for(i=0,len=dataArr.length;i<len;i++){value=dataArr[i].value;cleanValue=numberFormatter.getCleanValue(value);minValue=mathMin(minValue,cleanValue);maxValue=mathMax(maxValue,cleanValue)}conf.max=maxValue;conf.min=minValue};Entities.prototype._configureEntity=function _configureEntity(id,entityItem,entityJSON){var dataset=this,chart=dataset.getFromEnv("chart"),conf=dataset.config,numberFormatter=this.getFromEnv("number-formatter"),chartConf=chart.config,entityOpts=chartConf.entityOpts,entityConf=entityItem.config,labelConfig=entityItem.labelConfig,value=entityJSON.value,cleanValue=entityConf.cleanValue=numberFormatter.getCleanValue(value),formattedValue=entityConf.formattedValue=cleanValue!==UNDEF?numberFormatter.dataLabels(cleanValue):UNDEF,showTooltip=(0,_lib.pluckNumber)(entityJSON.showtooltip,entityOpts.showTooltip),defaultTooltip=this._getDefaultTooltip(entityItem,entityJSON,dataset),tooltextMacroObj={formattedValue:formattedValue,sName:entityJSON.shortLabel,lName:entityJSON.label},styleObj=entityOpts.dataLabels.style,toolText=entityConf.toolText=showTooltip?(0,_lib.parseUnsafeString)((0,_lib.pluck)((0,_lib.parseTooltext)((0,_lib.pluck)(entityJSON.tooltext,entityOpts.tooltext,defaultTooltip),[1,2,7,38,39],tooltextMacroObj,entityJSON))):BLANK,borderColor=entityConf.borderColor=(0,_lib.pluck)(entityJSON.bordercolor,entityOpts.borderColor),borderAlpha=entityConf.borderAlpha=(0,_lib.pluck)(entityJSON.borderalpha,entityOpts.borderAlpha),borderThickness=entityConf.borderThickness=(0,_lib.pluckNumber)(entityJSON.borderthickness,entityOpts.borderThickness),hoverOnNull=entityOpts.hoverOnNull,useHoverColor=entityConf.useHoverColor=(0,_lib.pluckNumber)(entityJSON.showhovereffect,entityJSON.usehovercolor,hoverOnNull?entityOpts.showHoverEffect:isNaN(value)?0:entityOpts.showHoverEffect),labelAlignment=entityConf.labelAlignment,colorManager=dataset.getFromEnv("colorManager"),colorObj=void 0,link=void 0,align=void 0,valign=void 0,color=void 0,alpha=void 0,angle=void 0,ratio=void 0,fillColor=void 0,fontColor=void 0,fontFamily=void 0,fontBold=void 0,emptyColorObject=void 0,fillColorObject=void 0,hoverColor=void 0,bgColor=void 0,bgAlpha=void 0,labels=void 0,labelObj=void 0,oriLabels=void 0,i=void 0,alphaArr=void 0;entityItem.hidden=false;entityConf.showLabel=(0,_lib.pluckNumber)(entityJSON.showlabel,entityOpts.showLabels);entityConf.labelPadding=(0,_lib.pluckNumber)(entityJSON.labelpadding,entityOpts.labelPadding);entityConf.fontFamily=(0,_lib.pluck)(entityJSON.font,styleObj.fontFamily);entityConf.fontSize=(0,_lib.pluckNumber)(parseInt(entityJSON.fontsize,10),parseInt(styleObj.fontSize,10));entityConf.fontBold=(0,_lib.pluckNumber)(entityJSON.fontbold,0);entityConf.fontColor=(0,_lib.pluck)(entityJSON.fontcolor,styleObj.color);entityConf.connectorColor=(0,_lib.pluck)(entityJSON.labelconnectorcolor,entityOpts.connectorColor);entityConf.connectorAlpha=(0,_lib.pluck)(entityJSON.labelconnectoralpha,entityOpts.connectorAlpha);entityConf.hoverBorderThickness=(0,_lib.pluckNumber)(entityJSON.borderhoverthickness,entityJSON.hoverborderthickness,entityOpts.hoverBorderThickness);entityConf.hoverBorderColor=(0,_lib.pluck)(entityJSON.borderhovercolor,entityJSON.hoverbordercolor,entityOpts.hoverBorderColor,entityConf.borderColor);entityConf.hoverBorderAlpha=(0,_lib.pluck)(entityJSON.borderhoveralpha,entityJSON.hoverborderalpha,entityOpts.hoverBorderAlpha,entityConf.borderAlpha);entityConf.connectorThickness=(0,_lib.pluckNumber)(entityJSON.labelconnectorthickness,entityOpts.connectorThickness);entityConf.origConnectorThickness=entityConf.connectorThickness;entityConf.borderThickness=borderThickness;entityConf.link=entityJSON.link;entityConf.isVisible=true;entityConf.id=id;entityConf.originalId=entityJSON.origId;if(cleanValue!==null){colorObj=colorManager&&colorManager.getColor(cleanValue);if(colorObj&&!colorObj.outOfRange){bgColor=colorObj.code;if(colorObj.oriAlpha!==UNDEF){bgAlpha=colorObj.oriAlpha+""}}}if((0,_lib.pluck)(entityJSON.color,entityJSON.alpha,entityJSON.angle,entityJSON.ratio)!==UNDEF){color=(0,_lib.pluck)(entityJSON.color,bgColor,entityOpts.fillColor);alpha=(0,_lib.pluck)(entityJSON.alpha,bgAlpha,entityOpts.fillAlpha);angle=(0,_lib.pluck)(entityJSON.angle,entityOpts.fillAngle);ratio=(0,_lib.pluck)(entityJSON.ratio,entityOpts.fillRatio);fillColor=colorize({color:color,alpha:alpha,angle:angle,ratio:ratio})}else{fillColorObject=colorize({color:(0,_lib.pluck)(bgColor,entityOpts.fillColor),alpha:(0,_lib.pluck)(bgAlpha,entityOpts.fillAlpha),angle:(0,_lib.pluck)(entityOpts.fillAngle),ratio:(0,_lib.pluck)(entityOpts.fillRatio)});emptyColorObject=colorize({color:(0,_lib.pluck)(entityOpts.nullEntityColor),alpha:(0,_lib.pluck)(entityOpts.nullEntityAlpha),angle:(0,_lib.pluck)(entityOpts.nullEntityAngle),ratio:(0,_lib.pluck)(entityOpts.nullEntityRatio)});fillColor=cleanValue===null?emptyColorObject:fillColorObject;color=fillColor.FCcolor.color;alpha=fillColor.FCcolor.alpha;angle=fillColor.FCcolor.angle;ratio=fillColor.FCcolor.ratio}if(toolText===BLANK){conf.showTooltip=0}entityConf.visibleEntityAttr={stroke:(0,_libGraphics.convertColor)(borderColor,borderAlpha),fill:(entityConf.fillColor=fillColor).toString(),"fill-opacity":alpha/100};alphaArr=alpha.split(COMMA);entityConf.alphaArr=alphaArr;if(useHoverColor){if((0,_lib.pluck)(entityJSON.fillhovercolor,entityJSON.fillhoveralpha,entityJSON.fillhoverangle,entityJSON.fillhoverratio,entityJSON.hoverfillcolor,entityJSON.hoverfillalpha,entityJSON.hoverfillratio,entityJSON.hoverfillangle)!==UNDEF){color=(0,_lib.pluck)(entityJSON.fillhovercolor,entityJSON.hoverfillcolor,entityOpts.hoverFillColor);alpha=(0,_lib.pluck)(entityJSON.fillhoveralpha,entityJSON.hoverfillalpha,entityOpts.hoverFillAlpha);angle=(0,_lib.pluck)(entityJSON.fillhoverangle,entityJSON.hoverfillangle,entityOpts.hoverFillAngle);ratio=(0,_lib.pluck)(entityJSON.fillhoverratio,entityJSON.hoverfillratio,entityOpts.hoverFillRatio);hoverColor=colorize({color:color,alpha:alpha,angle:angle,ratio:ratio})}else{if(!entityOpts.hoverColorObject){entityOpts.hoverColorObject=colorize({color:entityOpts.hoverFillColor,alpha:entityOpts.hoverFillAlpha,angle:entityOpts.hoverFillAngle,ratio:entityOpts.hoverFillRatio})}hoverColor=entityOpts.hoverColorObject}entityConf.hoverColor=hoverColor}!labelConfig&&(labelConfig=entityItem.labelConfig={});fontColor=entityConf.fontColor;fontFamily=entityConf.fontFamily;fontBold=entityConf.fontBold;toolText=entityConf.toolText;link=entityConf.link;if(labelAlignment){align=labelAlignment[0];valign=labelAlignment[1]}else{align=POSITION_CENTER;valign=POSITION_MIDDLE}labelConfig.align=align;labelConfig.vAlign=valign;labelConfig.bgColor=BLANK;labelConfig.borderColor=BLANK;labelConfig.fontColor=fontColor;labelConfig.fontFamily=fontFamily;labelConfig.fontBold=fontBold;labelConfig.toolText=toolText;labelConfig.link=link;if(_typeof(entityConf.options)==="object"){labels=entityConf.entityLabels=entityConf.entityLabels||[];oriLabels=entityConf.labels||[];i=oriLabels.length;while(i--){if(!labels[i]){labels[i]={config:{}}}labelConfig=labels[i].config;labelAlignment=oriLabels[i].labelAlignment;if(labelAlignment){align=labelAlignment[0];valign=labelAlignment[1]}else{align=POSITION_CENTER;valign=POSITION_MIDDLE}labelConfig.align=align;labelConfig.vAlign=valign;labelConfig.displayValue=dataset.getDisplayValue(entityItem,oriLabels[i],entityConf.options.isDataEnabled,!i,entityJSON);labelConfig.bgColor=BLANK;labelConfig.borderColor=BLANK;labelConfig.toolText=toolText;labelConfig.align=align;labelConfig.vAlign=valign;labelConfig.bgColor=BLANK;labelConfig.borderColor=BLANK;labelConfig.fontColor=fontColor;labelConfig.fontFamily=fontFamily;labelConfig.fontBold=fontBold;labelConfig.toolText=toolText}}else{labelObj={shortText:entityConf.shortLabel,text:entityConf.label};labelConfig.displayValue=dataset.getDisplayValue(entityItem,labelObj,true,true,entityJSON)}};Entities.prototype.getDisplayValue=function getDisplayValue(entity,labelObj,userValue,userDV,entityJSON){var chart=this.getFromEnv("chart"),entityOpts=chart.config.entityOpts,entityConf=entity.config,cleanValue=entityConf.cleanValue,formattedValue=entityConf.formattedValue,labelSepChar=entityOpts.labelSepChar,displayValue=void 0;if(userValue){if(userDV&&typeof entityJSON.displayvalue!=="undefined"){displayValue=entityJSON.displayvalue}else{displayValue=(0,_lib.pluck)(entityOpts.includeNameInLabels?entityOpts.useShortName?labelObj.shortText:labelObj.text:"");if(entityOpts.includeValueInLabels&&cleanValue!==null){displayValue=displayValue===UNDEF?formattedValue:displayValue+labelSepChar+formattedValue}}}else{displayValue=entityConf.label}return displayValue};Entities._sanitizeEntityOptions=function _sanitizeEntityOptions(options){delete options.outlines;delete options.label;delete options.shortlabel;delete options.labelposition;delete options.labelalignment;delete options.labelconnectors;return options};Entities.prototype._redefineEntities=function _redefineEntities(entityDef){var dataset=this,conf=dataset.config,chart=dataset.getFromEnv("chart"),redefinedEntities={},processedIds={},entities=chart.config.entities,useSNameAsId=conf.useSNameAsId,i=void 0,defObj=void 0,oldId=void 0,newId=void 0,sName=void 0,lName=void 0,id=void 0,newObj=void 0,entityCount=0,entityStore=void 0,entityDataStore=void 0,item=void 0,entityObj=void 0;i=entityDef.length;while(i--){defObj=entityDef[i];oldId=defObj.internalid;newId=defObj.newid?defObj.newid:oldId;sName=defObj.sname;lName=defObj.lname;entityObj=entities[oldId];oldId=(0,_lib.trimString)(oldId);newId=(0,_lib.trimString)(newId);newId=newId&&newId.toLowerCase();if(entityObj){redefinedEntities[newId]=newObj={origId:oldId};processedIds[oldId]=true;for(item in entityObj){newObj[item]=entityObj[item]}newObj.shortLabel=sName||entityObj.shortLabel;newObj.label=lName||entityObj.label;newObj.showhovereffect=defObj.showhovereffect;newObj.fillhovercolor=defObj.fillhovercolor;newObj.fillhoveralpha=defObj.fillhoveralpha;newObj.fillhoverangle=defObj.fillhoverangle;newObj.fillhoverratio=defObj.fillhoverratio;newObj.borderhoverthickness=defObj.borderhoverthickness}}entityDataStore=dataset.components.data;if(!entityDataStore){entityDataStore=dataset.components.data={}}for(id in redefinedEntities){id=id.toLowerCase();if(!entityDataStore[id]){entityDataStore[id]={config:{}}}entityDataStore[id].config=redefinedEntities[id];entityCount+=1}entityStore=entityDataStore;for(id in entities){newObj=entities[id];id=(0,_lib.trimString)(id);if(!processedIds[id]){if(useSNameAsId){entityObj=entityStore[newObj.shortLabel.toLowerCase()];if(!entityObj){entityObj=entityStore[newObj.shortLabel.toLowerCase()]={}}entityObj.config={};entityObj.origId=newObj.shortLabel}else{entityObj=entityStore[id.toLowerCase()];if(!entityObj){entityObj=entityStore[id.toLowerCase()]={}}entityObj.config={};entityObj.config.origId=id}for(item in newObj){entityObj.config[item]=newObj[item]}entityCount+=1}}conf.entityCount=entityCount};Entities.prototype.draw=function draw(){var dataset=this,conf=dataset.config,chart=dataset.getFromEnv("chart"),BATCH_SIZE=_lib.hasSVG?200:10,doBatchRendering=void 0;this.config.ready=false;conf.BATCH_SIZE=BATCH_SIZE;conf.labelBatchSize=_lib.hasSVG?200:20;doBatchRendering=this._batchRender();doBatchRendering(0);chart.config.entityFlag=true;chart.checkComplete()};Entities.prototype._batchRender=function _batchRender(){var dataset=this,conf=dataset.config,chart=dataset.getFromEnv("chart"),firstEntity=chart.config.entities.firstEntity,entities=dataset.components.data,batchSize=conf.BATCH_SIZE,keys=conf.entityKeys=firstEntity?dataset._getKeys(firstEntity,entities):Object.keys(entities),keysLength=conf.entityLength=keys.length,i=void 0,entityObj=void 0,count=void 0,ent=void 0,outlinesDrawn=void 0,drawEntities=function drawEntities(entityStartIndex){i=entityStartIndex;count=0;while(keys[i]!==UNDEF){entityObj=entities[keys[i]];outlinesDrawn=dataset.drawEntity(entityObj,batchSize);count+=outlinesDrawn;if(entityObj.config.drawn){ent=i===keysLength-1?entityObj:entities[keys[i-1]];if(ent){ent.config.drawn=false;ent.config.outlineStartIndex=UNDEF}i++}if(count>=batchSize){dataset.addJob("entityDraw",drawEntities.bind(this,i),_schedular.priorityList.entitydraw);break}}if(i===keysLength){dataset._addEventListenersToEntities(0);dataset.initComplete()}};return drawEntities};Entities.prototype._addEventListenersToEntities=function _addEventListenersToEntities(startIndex){var dataset=this,entities=dataset.components.data,conf=dataset.config,batchSize=conf.BATCH_SIZE,keys=conf.entityKeys,i=void 0,len=conf.entityLength,entity=void 0,count=0,options=void 0,entityConf=void 0;for(i=startIndex;i<len;i++){entity=entities[keys[i]];entityConf=entity.config;options=entityConf.options;if(!(options&&options.isDataEnabled===false)){dataset.addMouseGestures(entity)}count++;if(count===batchSize){dataset.addJob("_addEventListenersToEntities",dataset._addEventListenersToEntities.bind(this,i),_schedular.priorityList.entitydraw);break}}};Entities._getKeys=function _getKeys(firstEntity,entities){var keys=[firstEntity],item=firstEntity;while(entities[item]){item=entities[item].nextId;keys.push(item)}return keys};Entities.prototype._getDefaultTooltip=function _getDefaultTooltip(entity,entityJSON){var dataset=this,value=entity.config.cleanValue,formattedValue=entity.config.formattedValue,entityOpts=dataset.getFromEnv("chart").config.entityOpts,tooltip=void 0,labelObj=void 0;if(_typeof(entity.config.options)==="object"){labelObj=entityJSON.labels&&entityJSON.labels[0];if(!labelObj){return UNDEF}tooltip=(entityOpts.useSNameInTooltip?labelObj.shortText:labelObj.text)+(value===null?BLANK:entityOpts.tooltipSepChar+formattedValue)}else{tooltip=(entityOpts.useSNameInTooltip?entityJSON.shortLabel:entityJSON.label)+(value===null?BLANK:entityOpts.tooltipSepChar+formattedValue)}return tooltip};Entities.prototype.drawEntity=function drawEntity(entity,outlinesDrawCount){var dataset=this,chart=dataset.getFromEnv("chart"),animationManager=chart.getFromEnv("animationManager"),entityConf=entity.config,pathStr=_lib.hasSVG||!isIE?"litepath":"path",entityOpts=chart.config.entityOpts,outlines=entityConf.outlines,toolTipController=dataset.getFromEnv("toolTipController"),addTo=this.getLinkedParent().getChildContainer("plot"),shadowGroup=this.getLinkedParent().getChildContainer("plotShadow"),toolText=entityConf.toolText,showShadow=entityOpts.shadow,i=void 0,outlinePath=[],path=void 0,visibleEntityAttr=void 0,applyAttr=void 0,outlineGraphics=void 0,outline=void 0,count=void 0,customStrokeWidthModifier=void 0,finalAttr={},shadowOptions=void 0;dataset._configureEntityDrawingParams(entity);entityConf=entity.config;visibleEntityAttr=entityConf.visibleEntityAttr;shadowOptions=entityConf.shadowOptions;i=entityConf.outlineStartIndex===UNDEF?outlines.length:entityConf.outlineStartIndex;if(!entity.graphics){entity.graphics={}}count=0;outlinePath=entityConf.outlinePath||(entityConf.outlinePath=[]);customStrokeWidthModifier=entityConf.customStrokeWidthModifier;if(_typeof(entityConf.options)==="object"){while(i--){outlinePath=outlines[i].outline;if(entityConf.options.isDataEnabled===true){applyAttr=visibleEntityAttr}else{applyAttr=(0,_lib.extend2)((0,_lib.extend2)({},visibleEntityAttr),pruneStrokeAttrs(outlines[i].style,customStrokeWidthModifier))}outlineGraphics=entity.graphics.outlines;if(!outlineGraphics){outlineGraphics=entity.graphics.outlines=[]}!outlineGraphics[i]&&(outlineGraphics[i]={});outline=outlineGraphics[i].outline;applyAttr[pathStr]=outlinePath;outline=outlineGraphics[i].outline=animationManager.setAnimation({el:pathStr,container:addTo,attr:applyAttr,component:dataset,label:"path"});outline.shadow(showShadow?shadowOptions:false,shadowGroup);toolTipController.enableToolTip(outline,toolText);count++;entityConf.outlineStartIndex=i;if(count===outlinesDrawCount){return count}}entityConf.drawn=true;return count}else{while(i--){path=outlines[i];outlinePath=path.concat(outlinePath);count++;entityConf.outlineStartIndex=i;if(count===outlinesDrawCount){entityConf.outlinePath=outlinePath;return count}}!entity.graphics.outlines&&(visibleEntityAttr[pathStr]=outlinePath);Object.assign(finalAttr,visibleEntityAttr,entity.hidden&&{"fill-opacity":0}||{});entity.graphics.outlines=animationManager.setAnimation({el:entity.graphics.outlines||pathStr,container:addTo,attr:finalAttr,component:dataset,label:"path"});entityConf.drawn=true;entityConf.outlineStartIndex=0;entityConf.outlinePath=[];entity.graphics.outlines.shadow(showShadow?shadowOptions:false,shadowGroup);toolTipController.enableToolTip(entity.graphics.outlines,toolText);return count}};Entities.prototype._configureEntityDrawingParams=function _configureEntityDrawingParams(entity){var dataset=this,chart=dataset.getFromEnv("chart"),entityConf=entity.config,entityOpts=chart.config.entityOpts,scalingParams=chart.config.scalingParams,scaleStrokes=!isIE||_lib.hasSVG,scaleFactor=scalingParams.scaleFactor,scaledPixel=scalingParams.strokeWidth,scaledPixelWithBaseFactor=(scaleStrokes?chart.baseScaleFactor:1)*scaledPixel,scaleBorder=entityOpts.scaleBorder===1,borderThickness=entityConf.borderThickness,alphaArr=entityConf.alphaArr,connectorThickness=entityConf.origConnectorThickness,hoverBorderThickness=entityConf.hoverBorderThickness,visibleEntityAttr=entityConf.visibleEntityAttr,fillOpacity=visibleEntityAttr["fill-opacity"],customStrokeWidthModifier=void 0;entityConf.shadowOptions={scalefactor:[scaleFactor,scaleFactor*chart.config.baseScaleFactor],opacity:mathMax.apply(math,alphaArr)/100,useFilter:0};entityConf.fillOpacity=entity.hidden?0:fillOpacity;if(scaleStrokes){borderThickness=entityConf.entityBorderThickness=scaleBorder?borderThickness*scaledPixelWithBaseFactor:borderThickness/scaleFactor;connectorThickness=connectorThickness/scaleFactor;customStrokeWidthModifier=scaleBorder?scaleFactor:scalingParams.sFactor;if(hoverBorderThickness){hoverBorderThickness=entityConf.hoverBorderThickness=scaleBorder?hoverBorderThickness*scaledPixelWithBaseFactor:hoverBorderThickness/scaleFactor}}else{borderThickness=scaleBorder?borderThickness*scaledPixel:borderThickness;customStrokeWidthModifier=scaleBorder?scalingParams.scaleFactor:chart.baseScaleFactor}entityConf.entityBorderThickness=borderThickness;entityConf.connectorThickness=connectorThickness;entityConf.customStrokeWidthModifier=customStrokeWidthModifier;visibleEntityAttr["stroke-width"]=borderThickness;visibleEntityAttr.transform=_lib.hasSVG||!isIE?"":scalingParams.transformStr};Entities.prototype.drawLabels=function drawLabels(ent){var dataset=this,itemMap=ent,chart=dataset.getFromEnv("chart"),conf=dataset.config,batchSize=conf.labelBatchSize,keysLength=conf.entityLength,labelItems=[],i=void 0,j=void 0,groupItems=void 0,annObj=void 0,annCount=0,mapLabelAnnotations=chart.getChildren("mapLabelAnnotations")&&chart.getChildren("mapLabelAnnotations")[annCount],count=0,labelItemsAdded=0,toolTipController=chart.getFromEnv("toolTipController"),annConfig=chart.config.annotationConfig;if(!mapLabelAnnotations){annObj=new _extAnnotation2["default"];chart.attachChild(annObj,"mapLabelAnnotations");mapLabelAnnotations=chart.getChildren("mapLabelAnnotations")[annCount]}mapLabelAnnotations.clear();mapLabelAnnotations._renderer&&(mapLabelAnnotations._renderer=null);annConfig.showbelow=0;for(i in itemMap){dataset.drawLabel(itemMap[i],labelItems);count++;if(count===batchSize){mapLabelAnnotations.annotation.injectDependency("paper",chart.getFromEnv("paper"));mapLabelAnnotations.annotation.injectDependency("toolTipController",toolTipController);for(j=0;j<labelItems.length;j++){labelItems[j].animationLabel="entityLabel"}groupItems=mapLabelAnnotations.addGroup(Object.assign(annConfig,{id:"entityLabels"+annCount,items:labelItems,animationLabel:"entityLabelGroup"}),dataset);chart.config.labelsOnTop&&groupItems.store.element.toFront();for(j=0;j<groupItems.items.length;j++){groupItems.items[j].addEventListener("mouseover",labelItems[j].onmouseover);groupItems.items[j].addEventListener("mouseout",labelItems[j].onmouseout);groupItems.items[j].addEventListener("click",labelItems[j].onclick)}annCount++;mapLabelAnnotations=chart.getChildren("mapLabelAnnotations")&&chart.getChildren("mapLabelAnnotations")[annCount];if(!mapLabelAnnotations){annObj=new _extAnnotation2["default"];chart.attachChild(annObj,"mapLabelAnnotations");mapLabelAnnotations=chart.getChildren("mapLabelAnnotations")[annCount]}mapLabelAnnotations.clear();mapLabelAnnotations._renderer&&(mapLabelAnnotations._renderer=null);count=0;labelItems=[]}else if(labelItemsAdded===keysLength-1){mapLabelAnnotations.annotation.injectDependency("paper",chart.getFromEnv("paper"));mapLabelAnnotations.annotation.injectDependency("toolTipController",toolTipController);for(j=0;j<labelItems.length;j++){labelItems[j].animationLabel="entityLabel"}groupItems=mapLabelAnnotations.addGroup(Object.assign(annConfig,{id:"entityLabels"+annCount,items:labelItems,animationLabel:"entityLabelGroup"}),dataset);chart.config.labelsOnTop&&groupItems.store.element.toFront();for(j=0;j<groupItems.items.length;j++){groupItems.items[j].addEventListener("mouseover",labelItems[j].onmouseover);groupItems.items[j].addEventListener("mouseout",labelItems[j].onmouseout);groupItems.items[j].addEventListener("click",labelItems[j].onclick)}}labelItemsAdded++}dataset.drawLabelConnFn(0)};Entities.prototype.drawLabelConnFn=function drawLabelConnFn(startIndex){var dataset=this,conf=dataset.config,entities=dataset.components.data,batchSize=conf.BATCH_SIZE,keys=conf.entityKeys,l=void 0,i=void 0,length=keys.length,labelArr=void 0,config=void 0,entity=void 0,count=0;for(i=startIndex;i<length;i++){entity=entities[keys[i]];config=entity.config;if(_typeof(config.options)==="object"){labelArr=config.labels;l=labelArr&&labelArr.length||0;while(l--){if(labelArr[l].labelConnectors){dataset.drawLabelConnectors(entity,labelArr[l].labelConnectors,dataset);count++}}}else{if(config.labelConnectors){dataset.drawLabelConnectors(entity,config.labelConnectors,dataset);count++}}if(count===batchSize){dataset.addJob("drawLabelConnectors",dataset.drawLabelConnFn.bind(this,i),_schedular.priorityList.entitydraw);break}}};Entities.prototype._getLabelObject=function _getLabelObject(entity,index,userValue){var dataset=this,chart=dataset.getFromEnv("chart"),entityConf=entity.config,labelConfig=void 0,scalingParams=chart.config.scalingParams,labelPos=void 0,labelAlignment=void 0,firstEle=entity.graphics&&entity.graphics.outlines,fontStyleObj=void 0,fontSize=entityConf.fontSize,labelPadding=entityConf.labelPadding,labelsArr=entityConf.labels||[],entityLabels=entityConf.entityLabels||[],baseWidth=void 0,baseHeight=void 0,labelX=void 0,labelY=void 0,box=void 0,align=void 0,valign=void 0,fsize=void 0,xOffset=void 0,yOffset=void 0,oriLabelObj=void 0,labelObj=void 0;if(index!==UNDEF){oriLabelObj=labelsArr[index];labelObj=entityLabels[index];labelConfig=labelObj.config;fontStyleObj=labelConfig.style=oriLabelObj.style;labelPos=oriLabelObj.labelPosition;labelAlignment=oriLabelObj.labelAlignment}else{labelConfig=entity.labelConfig;labelPos=entityConf.labelPosition;labelAlignment=entityConf.labelAlignment}if(labelPos){labelX=labelPos[0];labelY=labelPos[1]}else{box=firstEle.getBBox();labelX=box.x+box.width/2;labelY=box.y+box.height/2}if(labelAlignment){align=labelAlignment[0];valign=labelAlignment[1];if(align===POSITION_RIGHT){labelX-=labelPadding}else if(align===POSITION_LEFT){labelX+=labelPadding}if(valign===POSITION_TOP){labelY-=labelPadding}else if(valign===POSITION_BOTTOM){labelY+=labelPadding}}else{align=POSITION_CENTER;valign=POSITION_MIDDLE}fsize=parseFloat(fontSize)/scalingParams.sFactor;if(!userValue&&fontStyleObj){fontStyleObj.color&&(labelConfig.fontColor=fontStyleObj.color);fontStyleObj["font-size"]&&(fsize=parseFloat(fontStyleObj["font-size"])/scalingParams.sFactor);fontStyleObj["font-family"]&&(labelConfig.fontFamily=fontStyleObj["font-family"]);fontStyleObj["font-weight"]!==UNDEF&&(labelConfig.fontBold=fontStyleObj["font-weight"]==="bold")}labelConfig.x=labelX.toString();labelConfig.y=labelY.toString();labelConfig.wrap=1;labelConfig.type="text";labelConfig.fontSize=fsize;return{x:labelX.toString(),y:labelY.toString(),wrapwidth:getTextWrapWidth[align](baseWidth,labelX+xOffset)-labelPadding,wrapheight:getTextWrapHeight[valign](baseHeight,labelY+yOffset)-labelPadding,wrap:1,type:"text",align:labelConfig.align,valign:labelConfig.vAlign,text:labelConfig.displayValue,tooltext:labelConfig.toolText,css:labelConfig.link!==UNDEF&&{cursor:"pointer",_cursor:"hand"},bgcolor:labelConfig.bgColor,bordercolor:labelConfig.borderColor,fillcolor:labelConfig.fontColor,fontsize:labelConfig.fontSize,font:labelConfig.fontFamily,bold:labelConfig.fontBold,onclick:function onclick(e){var hoverEnt=entity.graphics.outlines,i=void 0,len=void 0;if(hoverEnt instanceof Array){for(i=0,len=hoverEnt.length;i<len;i++){dataset.entityClick(hoverEnt[i].outline,e)}}else{dataset.entityClick(hoverEnt,e)}},onmouseover:function onmouseover(e){var hoverEnt=entity.graphics.outlines,i=void 0,len=void 0;if(hoverEnt instanceof Array){for(i=0,len=hoverEnt.length;i<len;i++){dataset.entityRollOver(hoverEnt[i].outline,e)}}else{dataset.entityRollOver(hoverEnt,e)}},onmouseout:function onmouseout(e){var hoverEnt=entity.graphics.outlines,i=void 0,len=void 0;if(hoverEnt instanceof Array){for(i=0,len=hoverEnt.length;i<len;i++){dataset.entityRollOut(hoverEnt[i].outline,e)}}else{dataset.entityRollOut(hoverEnt,e)}},ontouchstart:function ontouchstart(e){var hoverEnt=entity.graphics.outlines,i=void 0,len=void 0;if(hoverEnt instanceof Array){for(i=0,len=hoverEnt.length;i<len;i++){dataset.entityRollOver(hoverEnt[i].outline,e)}}else{dataset.entityRollOver(hoverEnt,e)}dataset.entityRollOver(hoverEnt,e)}}};Entities.prototype.drawLabel=function drawLabel(entity,annotationsArray){var dataset=this,config=entity.config,showLabel=config.showLabel,useValue=void 0,i=void 0,labelArr=void 0;if(!showLabel){return}if(_typeof(config.options)==="object"){labelArr=config.labels;i=labelArr&&labelArr.length||0;useValue=config.options.isDataEnabled;while(i--){annotationsArray.push(dataset._getLabelObject(entity,i,useValue,!i))}}else{annotationsArray.push(dataset._getLabelObject(entity,UNDEF,true,true))}};Entities.prototype.drawLabelConnectors=function drawLabelConnectors(entity,connectorArr,dataSet){var entityConf=entity.config,dataset=this,chart=dataset.getFromEnv("chart"),animationManager=chart.getFromEnv("animationManager"),scalingParams=chart.config.scalingParams,datasetGroup=dataSet.getLinkedParent().getChildContainer("plot"),i=connectorArr&&connectorArr.length||0,connElem=void 0,path=void 0,showLabel=entityConf.showLabel;while(i--){path=connectorArr[i];connElem=entity.graphics.connectorElem;if(showLabel){entity.graphics.connectorElem=connElem=animationManager.setAnimation({el:entity.graphics.connectorElem||"path",attr:{path:path,opacity:1,transform:_lib.hasSVG||!isIE?"":scalingParams.transformStr,stroke:(0,_libGraphics.convertColor)(entityConf.connectorColor,entityConf.connectorAlpha),"shape-rendering":CRISP,"stroke-width":entityConf.connectorThickness},container:datasetGroup,component:dataset,label:"labelConnectors"})}else{connElem&&connElem.hide()}}};Entities.prototype.entityClick=function entityClick(entityElem,e){var entity=entityElem.node.__entity,dataset=this,chart=dataset.getFromEnv("chart"),scalingParams=chart.config.scalingParams,entityBox=entity.graphics.outlines.getBBox(),linkClickFN=chart.getFromEnv("linkClickFN"),config=entity.config,link=config.link;entityBox.width=entityBox.width*scalingParams.scaleFactor;entityBox.height=entityBox.height*scalingParams.scaleFactor;entityBox.x=entityBox.x*scalingParams.scaleFactor+scalingParams.translateX;entityBox.y=entityBox.y*scalingParams.scaleFactor+scalingParams.translateY;entityBox.x2=entityBox.x+entityBox.width;entityBox.y2=entityBox.y+entityBox.height;chart.fireChartInstanceEvent("entityclick",config.eventArgs,e);if(link!==UNDEF){linkClickFN.call({link:link,entity:entity,entityBox:entityBox},true)}};Entities.prototype.entityRollOver=function entityRollOver(entityElem,e){var entity=entityElem.node.__entity,dataset=this,config=entity.config,chart=dataset.getFromEnv("chart"),animationManager=chart.getFromEnv("animationManager"),hoverAttr=config.hoverAttr;chart.plotEventHandler(entityElem,e,"entityRollOver");if(entityElem.data("hovered")){clearTimeout(entity.config.timer)}else{if(config.useHoverColor&&config.isVisible&&!entity.hidden&&hoverAttr){chart.config.hoverEntity=entityElem;animationManager.setAnimation({el:entityElem,attr:hoverAttr,component:dataset,state:"updating",label:"path"});entityElem.data("hovered",true)}}};Entities.prototype.entityRollOut=function entityRollOut(entityElem,e){var entity=entityElem.node.__entity,dataset=this,hidden=void 0,chart=dataset.getFromEnv("chart"),animationManager=chart.getFromEnv("animationManager"),config=entity.config,revertAttr=config.revertAttr;chart.plotEventHandler(entityElem,e,"entityRollOut");entity.config.timer=setTimeout(function(){hidden=entity.hidden;if(hidden!==true&&revertAttr){animationManager.setAnimation({el:entityElem,attr:revertAttr,component:dataset,state:"updating",label:"path"});entityElem.data("hovered",false)}},100)};Entities.prototype.addMouseGestures=function addMouseGestures(entity){var config=entity.config,originalId=config.originalId,dataset=this,graphics=entity.graphics,useHoverColor=config.useHoverColor,hoverBorderThickness=config.hoverBorderThickness,hoverBorderColor=config.hoverBorderColor,hoverBorderAlpha=config.hoverBorderAlpha,borderThickness=config.entityBorderThickness,borderColor=config.borderColor,borderAlpha=config.borderAlpha,link=config.link,visibleEntityAttr=config.visibleEntityAttr,groupId="groupId"+originalId,item=void 0,i=void 0,graphic=void 0,len=void 0,outlines=void 0,bindListener=function bindListener(graphic){if(link!==UNDEF){graphic.css({cursor:"pointer",_cursor:"hand"})}graphic.data("eventArgs",config.eventArgs);graphic.data("groupId",groupId);graphic.node.__entity=entity;if(!entity._listenersBinded){graphic.click(dataset.entityClick.bind(dataset,graphic)).hover(dataset.entityRollOver.bind(dataset,graphic),dataset.entityRollOut.bind(dataset,graphic))}};config.eventArgs={value:config.cleanValue,label:config.label,shortLabel:config.shortLabel,originalId:config.origId,id:config.id||config.origId};config.legacyEventArgs={value:config.value,lName:config.label,sName:config.shortLabel,id:config.originalId||config.id};if(useHoverColor){config.hoverAttr={fill:(0,_lib.toRaphaelColor)(config.hoverColor)};config.revertAttr={fill:(0,_lib.toRaphaelColor)(config.fillColor),stroke:(0,_lib.toRaphaelColor)(config.borderColor,config.borderAlpha)};config.revertAttr["fill-opacity"]=visibleEntityAttr["fill-opacity"];if(hoverBorderThickness!==borderThickness){config.hoverAttr["stroke-width"]=(0,_lib.pluckNumber)(hoverBorderThickness,borderThickness);config.revertAttr["stroke-width"]=borderThickness}if(hoverBorderColor!==borderColor||hoverBorderAlpha!==borderAlpha){config.hoverAttr.stroke=(0,_libGraphics.convertColor)(hoverBorderColor,hoverBorderAlpha);config.revertAttr.stroke=(0,_libGraphics.convertColor)(borderColor,borderAlpha)}}for(item in graphics){if(graphics.hasOwnProperty(item)){if(graphics[item]instanceof Array){outlines=graphics[item];for(i=0,len=outlines.length;i<len;i++){graphic=outlines[i].outline;bindListener(graphic)}entity._listenersBinded=true}else{graphic=graphics[item];bindListener(graphic);entity._listenersBinded=true}}}};Entities.prototype.getDataLimits=function getDataLimits(){var dataset=this,conf=dataset.config;return{max:conf.max,min:conf.min}};Entities.prototype.initComplete=function initComplete(){var dataset=this,chart=dataset.getFromEnv("chart"),entities=dataset.components.data;this.drawLabels(entities);chart.config.entitiesReady=true;chart.checkComplete()};return Entities}(_componentInterface2["default"]);exports["default"]=Entities},719:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var fadeEffect=[{initialAttr:function initialAttr(){return{opacity:0}},finalAttr:function finalAttr(){return{opacity:1}}}];exports["default"]={"initial.dataset.entities":function initialDatasetEntities(){return{"path.appearing":function pathAppearing(){fadeEffect[0].slot="plot";return fadeEffect},"path.updating":function pathUpdating(input){return[{finalAttr:function finalAttr(){return input.finalAttr}}]},"labelConnectors.appearing":function labelConnectorsAppearing(){fadeEffect[0].slot="final";return fadeEffect},"labelConnectors.updating":null,"entityLabel.appearing":function entityLabelAppearing(){return[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}]},"*":null}},"initial.dataset.markers":function initialDatasetMarkers(){return{markers:null,"markerItem.appearing":function markerItemAppearing(){fadeEffect[0].slot="final";return fadeEffect},"markerItem.updating":function markerItemUpdating(input){return[{finalAttr:function finalAttr(){return input.finalAttr}}]}}},"initial.group.mapGroup":function initialGroupMapGroup(){return{"group.appearing":function groupAppearing(input){return[{initialAttr:function initialAttr(){return Object.assign({opacity:0},input.attr)},finalAttr:function finalAttr(){return input.attr},slot:"plot"}]},"group.updating":function groupUpdating(input){return[{initialAttr:function initialAttr(){return Object.assign({opacity:0},input.attr)},finalAttr:function finalAttr(){return input.attr},slot:"plot"}]},"*":null}}}},720:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _entities=__webpack_require__(718);var _entities2=_interopRequireDefault(_entities);var _kdtree=__webpack_require__(419);var _kdtree2=_interopRequireDefault(_kdtree);var _dependencyManager=__webpack_require__(125);var _mapEntitiesAnimation=__webpack_require__(719);var _mapEntitiesAnimation2=_interopRequireDefault(_mapEntitiesAnimation);var _lib=__webpack_require__(118);var _libGraphics=__webpack_require__(122);var _eventApi=__webpack_require__(124);var _schedular=__webpack_require__(129);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass)}var UNDEF=void 0,userAgent=window.navigator.userAgent,isIE=/msie/i.test(userAgent)&&!window.opera,BLANK="",POSITION_TOP="top",POSITION_BOTTOM="bottom",POSITION_RIGHT="right",POSITION_LEFT="left",POSITION_MIDDLE="middle",POSITION_CENTER="center",INNERRADIUSFACTOR=.6,math=window.Math,mathMin=math.min,mathMax=math.max,MARKER_ITEM_KEY="items",mathPI=Math.PI,deg2rad=mathPI/180,TRACKER_FILL="rgba(192,192,192,"+(isIE?.002:1e-6)+")",colorize=function colorize(original,obj){var col=!obj?{FCcolor:original}:(0,_lib.extend2)(original.FCcolor,obj,false,true);col.toString=_lib.toRaphaelColor;return col},convertToObj=function convertToObj(arr,idKey){var i=arr&&arr.length||false,key=idKey||"id",returnObj={},item=void 0;if(!arr){return arr}while(i--){item=arr[i];item[key]!==UNDEF&&(returnObj[item[key].toLowerCase()]=item)}return returnObj};(0,_dependencyManager.addDep)({name:"mapsAnimation",type:"animationRule",extension:_mapEntitiesAnimation2["default"]});var Markers=function(_Entities){_inherits(Markers,_Entities);function Markers(){_classCallCheck(this,Markers);var _this=_possibleConstructorReturn(this,_Entities.call(this));_this.components={};_this.getLabelAlignment={top:function top(x,y,radius){return{x:x.toString(),y:(y-radius).toString(),align:POSITION_CENTER,valign:POSITION_TOP}},left:function left(x,y,radius){return{x:(x-radius).toString(),y:y.toString(),align:POSITION_RIGHT,valign:POSITION_MIDDLE}},right:function right(x,y,radius){return{x:(x+radius).toString(),y:y.toString(),align:POSITION_LEFT,valign:POSITION_MIDDLE}},bottom:function bottom(x,y,radius){return{x:x.toString(),y:(y+radius).toString(),align:POSITION_CENTER,valign:POSITION_BOTTOM}},center:function center(x,y){return{x:x.toString(),y:y.toString(),align:POSITION_CENTER,valign:POSITION_MIDDLE}}};_this.getWrapWidth={right:function right(){return arguments[1]},left:function left(width,x){return width-x},center:function center(width,x){return mathMin(x,width-x)*2}};_this.getWrapHeight={top:function top(){return arguments[1]},middle:function middle(height,y){return mathMin(y,height-y)*2},bottom:function bottom(height,y){return height-y}};return _this}Markers.prototype.getName=function getName(){return"markers"};Markers.prototype.getType=function getType(){return"dataset"};Markers.prototype.configureAttributes=function configureAttributes(markerJSONData){if(!markerJSONData){return}this.JSONData=markerJSONData;var dataset=this,chart=dataset.getFromEnv("chart"),markerOptions=chart.config.markerOpts;dataset.calculateDataLimits();if(markerOptions.dataEnabled){this._parseMarkers()}else{this.defineMarkersNShapes()}this.configureConnectors()};Markers.prototype.calculateMarkerRadiusLimits=function calculateMarkerRadiusLimits(){if(!this.JSONData){return}var dataset=this,JSONData=dataset.JSONData,conf=dataset.config,chart=dataset.getFromEnv("chart"),width=chart.config.width,height=chart.config.height,markerMaxRadius=JSONData.markermaxradius,markerMinRadius=JSONData.markerminradius,minMax=Markers.getMarkerRadiusLimits(width,height,markerMaxRadius,markerMinRadius);conf.minRadius=minMax.min;conf.maxRadius=minMax.max};Markers.prototype.calculateDataLimits=function calculateDataLimits(){var dataset=this,chart=dataset.getFromEnv("chart"),conf=dataset.config,jsonData=chart.jsonData,markers=jsonData.markers||{},markerData=markers[MARKER_ITEM_KEY]||[],numberFormatter=this.getFromEnv("number-formatter"),min=+Infinity,max=-Infinity,markerObj=void 0,cleanValue=void 0,len=void 0,value=void 0,i=void 0;for(i=0,len=markerData.length;i<len;i++){markerObj=markerData[i];value=markerObj.value;cleanValue=numberFormatter.getCleanValue(value);if(cleanValue!==null){min=mathMin(cleanValue,min);max=mathMax(cleanValue,max)}}conf.min=min;conf.max=max};Markers.prototype._parseMarkers=function _parseMarkers(){var dataset=this,chart=dataset.getFromEnv("chart"),jsonData=chart.jsonData,markers=jsonData.markers,markerData=markers[MARKER_ITEM_KEY],shapeArr=markers.shapes,markerOptions=chart.config.markerOpts,numberFormatter=this.getFromEnv("number-formatter"),shapeObjs=dataset.components.shapeObjs={},markerObjs=dataset.components.markerObjs={},value=void 0,i=void 0,markerObj=void 0,item=void 0,shapeId=void 0,markerConfig=void 0,options=void 0,id=void 0;if(!markerData||!markerData.length){return}if(shapeArr&&shapeArr.length){i=shapeArr.length;for(;i;i-=1){item=shapeArr[i-1];if(id=item.id.toLowerCase()){shapeObjs[id]=item}}}i=markerData.length;while(i--){item=markerData[i];if(id=item.id&&item.id.toLowerCase()){value=item.value;if(value!==UNDEF&&value!==""){value=parseFloat(value)}markerObj=Markers._initializeMarkerItem(id,item,null,chart);shapeId=markerObj.config.options.shapeid;shapeId&&typeof shapeId==="string"&&(shapeId=shapeId.toLowerCase());markerConfig=markerObj.config;options=markerConfig.options;markerConfig.cleanValue=numberFormatter.getCleanValue(value);if(markerConfig.cleanValue!==null){markerConfig.formattedValue=numberFormatter.dataLabels(value)}else{markerConfig.formattedValue=UNDEF}markerConfig.fillColor=(0,_lib.pluck)(options.fillcolor,options.color,markerOptions.fillColor);markerConfig.fillAlpha=(0,_lib.pluck)(options.fillalpha,options.alpha,markerOptions.fillAlpha);markerConfig.fillRatio=(0,_lib.pluck)(options.fillratio,markerOptions.fillRatio);markerConfig.fillAngle=(0,_lib.pluck)(options.fillangle,markerOptions.fillAngle);markerConfig.borderThickness=(0,_lib.pluckNumber)(options.borderthickness,markerOptions.borderThickness);markerConfig.borderColor=(0,_lib.pluck)(options.bordercolor,markerOptions.borderColor);markerConfig.borderAlpha=(0,_lib.pluck)(options.borderalpha,markerOptions.borderAlpha);markerConfig.labelPadding=options.labelpadding||markerOptions.labelPadding;markerObj.dataset=dataset;if(item.__hideMarker){markerObj._isHidden=true}if(shapeId){markerObj.shapeObj=shapeObjs[shapeId]}markerObjs[id]=markerObj}}};Markers.prototype.defineMarkersNShapes=function defineMarkersNShapes(){var dataset=this,chart=dataset.getFromEnv("chart"),jsonData=chart.jsonData,markers=jsonData.markers,defineArr=markers.definition,numberFormatter=this.getFromEnv("number-formatter"),markerOptions=chart.config.markerOpts,defineObject=convertToObj(defineArr)||{},applyObject=convertToObj(markers.application)||{},shapeArr=markers.shapes,shapeObjs=dataset.components.shapeObjs=dataset.components.shapeObjs||(dataset.components.shapeObjs={}),markerObjs=dataset.components.markerObjs=dataset.components.markerObjs||(dataset.components.markerObjs={}),options=void 0,markerConfig=void 0,value=void 0,i=void 0,markerObj=void 0,item=void 0,shapeId=void 0,id=void 0;if(!defineArr||!defineArr.length){return}if(shapeArr&&shapeArr.length){i=shapeArr.length;for(;i;i-=1){item=shapeArr[i-1];if(id=item.id.toLowerCase()){shapeObjs[id]=item}}}for(id in defineObject){item=defineObject[id];markerObj=markerObjs[id]=Markers._initializeMarkerItem(id,item,applyObject[id],chart);markerObj.dataset=dataset;shapeId=markerObj.config.options.shapeid;markerConfig=markerObj.config;value=item.value;markerConfig.cleanValue=numberFormatter.getCleanValue(value);options=markerConfig.options;if(markerConfig.cleanValue!==null){markerConfig.formattedValue=numberFormatter.dataLabels(value)}else{markerConfig.formattedValue=UNDEF}markerConfig.fillColor=(0,_lib.pluck)(options.fillcolor,options.color,markerOptions.fillColor);markerConfig.fillAlpha=(0,_lib.pluck)(options.fillalpha,options.alpha,markerOptions.fillAlpha);markerConfig.fillRatio=(0,_lib.pluck)(options.fillratio,markerOptions.fillRatio);markerConfig.fillAngle=(0,_lib.pluck)(options.fillangle,markerOptions.fillAngle);markerConfig.borderThickness=(0,_lib.pluckNumber)(options.borderthickness,markerOptions.borderThickness);markerConfig.borderColor=(0,_lib.pluck)(options.bordercolor,markerOptions.borderColor);markerConfig.borderAlpha=(0,_lib.pluck)(options.borderalpha,markerOptions.borderAlpha);markerConfig.labelPadding=options.labelpadding||markerOptions.labelPadding;markerConfig.options.tooltext=(0,_lib.pluck)(options.tooltext,markerOptions.tooltext);markerConfig.link=options.link;if(shapeId){markerObj.shapeObj=shapeObjs[shapeId.toLowerCase()]}}};Markers.getMarkerRadiusLimits=function getMarkerRadiusLimits(width,height,userMax,userMin){var dime=mathMin(width,height),factor=.02,times=3.5,minR=factor*dime,maxR=factor*times*dime;userMin=parseFloat(userMin);userMax=parseFloat(userMax);if(!isNaN(userMin)&&!isNaN(userMax)){if(userMin<userMax){return{min:userMin,max:userMax}}else{return{min:userMax,max:userMin}}}else if(!isNaN(userMin)){return{min:userMin,max:10*userMin}}else if(!isNaN(userMax)){return{min:parseInt(userMax/10,10),max:userMax}}else{return{min:minR,max:maxR}}};Markers.prototype.getDataLimits=function getDataLimits(){var dataset=this,conf=dataset.config;return{min:conf.min,max:conf.max}};Markers._initializeMarkerItem=function _initializeMarkerItem(id,markerDefinition,markerApplication){var markerObj={},config=markerObj.config,opts=void 0;if(!config){config=markerObj.config={}}config.id=id;config.definition=markerDefinition;config.application=markerApplication;config.hasValue=null;config.value=null;config.options=null;config.label=null;config.markerShape=null;config.markerLabel=null;config.drawOptions={shape:null,label:null};config.drawComplete=false;opts=markerObj.config.options=(0,_lib.extend2)({},config.definition);if(config.dataEnabled){if(!isNaN(opts.value)&&opts.value!==""){markerObj.value=parseFloat(opts.value);markerObj.hasValue=true}}else if(config.applyAll){config.options=(0,_lib.extend2)(opts,config.application)}else if(markerApplication){config.options=(0,_lib.extend2)(opts,config.application)}return markerObj};Markers.prototype.configureConnectors=function configureConnectors(){var dataset=this,chart=dataset.getFromEnv("chart"),jsonData=chart.jsonData,datasetComponents=dataset.components,markers=jsonData.markers||{},connectors=markers.connector||markers.connectors||[],markerObjs=datasetComponents.markerObjs,length=connectors.length,connectorComponents=dataset.components.connectors,getMouseOverFn=function getMouseOverFn(eventArgs){return function(e){var shape=this,wrapper=shape.getElement();if(wrapper&&shape.unfilteredConfig.hoverEffect){wrapper.attr(shape.unfilteredConfig._hoverAttrs)}chart.fireChartInstanceEvent("connectorrollover",eventArgs,e)}},getMouseOutFn=function getMouseOutFn(eventArgs){return function(e){var shape=this,wrapper=shape.getElement();if(wrapper&&shape.unfilteredConfig.hoverEffect){wrapper.attr(shape.unfilteredConfig._defaultAttrs)}chart.fireChartInstanceEvent("connectorrollout",eventArgs,e)}},getClickFn=function getClickFn(eventArgs){return function(e){chart.fireChartInstanceEvent("connectorClick",eventArgs,e)}},chartConnOptions=chart.config.connectorOpts,connectorItem={},config=void 0,options=void 0,fromMarker=void 0,toMarker=void 0,label=void 0,toolText=void 0,thickness=void 0,color=void 0,alpha=void 0,hovercolor=void 0,hoveralpha=void 0,hoverthickness=void 0,connLabelConfig=void 0,obj=void 0,i=void 0;connectorComponents=dataset.components.connectors=[];for(i=0;i<length;i++){obj=connectors[i];if(!obj.from&&!obj.to){continue}fromMarker=markerObjs[obj.from.toLowerCase()];toMarker=markerObjs[obj.to.toLowerCase()];if(!fromMarker||!toMarker){continue}label=connectors[i].label;connectorItem=connectorComponents[i];!connectorItem&&(connectorItem=connectorComponents[i]={});!connectorItem.config&&(config=connectorItem.config={});!connectorItem.graphics&&(connectorItem.graphics={});config=connectorItem.config=(0,_lib.extend2)({},obj);config.fromMarker=fromMarker;config.toMarker=toMarker;config.link=obj.link;config.showTooltip=(0,_lib.pluckNumber)(obj.showtooltip,chartConnOptions.showTooltip);toolText=config.tooltext=config.showTooltip?(0,_lib.pluck)(obj.tooltext,chartConnOptions.tooltext):BLANK;thickness=config.thickness=(0,_lib.pluck)(obj.thickness,chartConnOptions.thickness);color=config.color=(0,_lib.pluck)(obj.color,chartConnOptions.color);alpha=config.alpha=(0,_lib.pluck)(obj.alpha,chartConnOptions.alpha);config.hoverEffect=(0,_lib.pluckNumber)(obj.showhovereffect,chartConnOptions.showHoverEffect);hovercolor=(0,_lib.pluck)(obj.hovercolor,chartConnOptions.hoverColor,color);hoveralpha=(0,_lib.pluck)(obj.hoveralpha,chartConnOptions.hoverAlpha,alpha);hoverthickness=(0,_lib.pluck)(obj.hoverthickness,chartConnOptions.hoverThickness,thickness);config.dashed=(0,_lib.pluck)(obj.dashed,chartConnOptions.dashed);config.dashLen=(0,_lib.pluckNumber)(obj.dashlen,chartConnOptions.dashlen);config.dashGap=(0,_lib.pluckNumber)(obj.dashgap,chartConnOptions.dashgap);if(toolText){config.tooltext=toolText=(0,_lib.parseUnsafeString)((0,_lib.parseTooltext)(toolText,[3,40,41,42,43],{label:label,fromId:fromMarker.config.definition.id,toId:toMarker.config.definition.id,fromLabel:fromMarker.config.definition.label,toLabel:toMarker.config.definition.label},options))}config.eventArgs={fromMarkerId:fromMarker.config.id,toMarkerId:toMarker.config.id,label:label};config._hoverAttrs={stroke:colorize({color:hovercolor,alpha:hoveralpha}).toString(),"stroke-width":hoverthickness};config._defaultAttrs={stroke:colorize({color:color,alpha:alpha}).toString(),"stroke-width":thickness};config.type="line";config.onclick=getClickFn(config.eventArgs);config.onmouseover=getMouseOverFn(config.eventArgs);config.onmouseout=getMouseOutFn(config.eventArgs);if(label){connLabelConfig=connectorItem.labelConfig;!connLabelConfig&&(connLabelConfig=connectorItem.labelConfig={});connLabelConfig.type="text";connLabelConfig.text=label;connLabelConfig.align=POSITION_CENTER;connLabelConfig.valign=POSITION_MIDDLE;connLabelConfig.font=chartConnOptions.font;connLabelConfig.fillcolor=chartConnOptions.fontColor;connLabelConfig.bgcolor=chartConnOptions.labelBgColor;connLabelConfig.bordercolor=chartConnOptions.labelBorderColor;connLabelConfig.tooltext=config.tooltext}}};Markers.prototype.draw=function draw(){var dataset=this,chart=dataset.getFromEnv("chart"),conf=dataset.config,annotations=chart.getChildren("mapAnnotations")[0],markers=dataset.components.markerObjs,chartConf=chart.config,chartMarkerOpts=chartConf.markerOpts,scalingParams=chartConf.scalingParams,annConfig=chart.config.annotationConfig,toolTipController=dataset.getFromEnv("toolTipController"),markerItems=[],markerLabels=[],appliedMarkers={},appliedObj=void 0,markerItem=void 0,config=void 0,id=void 0,markerElem=void 0,markerLabelGroup=void 0,markerGroup=void 0;this._drawConnectors();dataset.imageLoadCount=0;dataset.imageCount=0;markerGroup=annotations.addGroup(Object.assign(annConfig,{id:"markers",fillalpha:"100",items:markerItems,scaleimages:1}),dataset);markerLabelGroup=annotations.addGroup(Object.assign(annConfig,{id:"markerLabels",items:markerLabels,scaleimages:1}),dataset);chartConf.labelsOnTop&&chart.getChildren("mapLabelAnnotations")&&chart.getChildren("mapLabelAnnotations")[0].annotation.groups[0].store.element.toFront();dataset.components.markerGroup=markerGroup;dataset.components.markerLabelGroup=markerLabelGroup;conf.autoScale=chartMarkerOpts.autoScale?scalingParams.sFactor:1;for(id in markers){appliedObj=null;markerItem=markers[id];config=markerItem.config;if(!config.conIsHidden){appliedObj=this._drawMarkerItem.call(markerItem)}if(!appliedObj){continue}config._annotationIndex=markerItems.length;appliedMarkers[id]=markerItem;markerItem.markerShape=appliedObj.markerShape&&annotations.addItem(markerGroup.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},appliedObj.markerShape),true,dataset);markerElem=markerItem.markerShape&&markerItem.markerShape.getElement();markerElem&&toolTipController.enableToolTip(markerElem,markerItem.config.tooltext);markerItems.push(markerItem.markerShape);markerItem.markerLabel=appliedObj.markerLabel&&annotations.addItem(markerLabelGroup.getId(),Object.assign({animationLabel:"markerItem"},appliedObj.markerLabel),true,dataset);markerLabels.push(markerItem.markerLabel)}dataset.addJob("buildKdtree",dataset._buildKdTree.bind(dataset),_schedular.priorityList.kdTree)};Markers.prototype._buildKdTree=function _buildKdTree(){var dataset=this,kdArrayMap=dataset.components.kdArrayMap,markerGroup=dataset.components.markerGroup,kdPointsArr=[],id=void 0,i=void 0,items=markerGroup&&markerGroup.items,len=items&&items.length||0;for(i=0;i<len;i++){id=items[i].config.id;kdArrayMap[id]&&kdPointsArr.push(kdArrayMap[id])}if(!dataset.components.kDTree){dataset.components.kDTree=new _kdtree2["default"](true)}dataset.components.kDTree._setSearchLimit(Infinity,Infinity);dataset.components.kDTree.buildKdTree(kdPointsArr)};Markers.prototype._drawMarkerItem=function _drawMarkerItem(){var marker=this,dataset=marker.dataset,chart=dataset.getFromEnv("chart"),conf=chart.config,datasetConfig=dataset.config,scalingParams=conf.scalingParams,markerConfig=marker.config,options=markerConfig.options,definition=markerConfig.definition,chartMarkerOpts=conf.markerOpts,markerStyle=chartMarkerOpts.dataLabels.style,shapeId=options.shapeid,itemScale=options.scale||1,label=options.label||BLANK,scaleFactor=chart.config.scalingParams.scaleFactor*chart.config.baseScaleFactor,labelPos=(options.labelpos||POSITION_TOP).toLowerCase(),value=markerConfig.formattedValue===UNDEF?UNDEF:markerConfig.formattedValue,tooltext=options.tooltext||chartMarkerOpts.tooltext,radius=(0,_lib.pluckNumber)(definition.radius,markerConfig.radius,chartMarkerOpts.radius)*itemScale*datasetConfig.autoScale||1e-4,fillColor=markerConfig.fillColor,fillAlpha=markerConfig.fillAlpha,fillRatio=markerConfig.fillRatio,fillAngle=markerConfig.fillAngle,borderThickness=markerConfig.borderThickness,borderColor=markerConfig.borderColor,borderAlpha=markerConfig.borderAlpha,labelObj=void 0,align=void 0,valign=void 0,baseWidth=void 0,baseHeight=void 0,xOffset=void 0,yOffset=void 0,wrapWidth=void 0,wrapHeight=void 0,labelPadding=void 0,shapeObj=void 0,fillAttrs=void 0,hoverFillAttrs=void 0,temp=void 0,calcX=void 0,calcY=void 0,kdPoint=void 0,innerradius=void 0,sides=void 0,type=void 0,kdArrayMap=dataset.components.kdArrayMap||(dataset.components.kdArrayMap={}),markerId=marker.config.id;markerConfig.autoScale=chartMarkerOpts.autoScale?scaleFactor:1;if(!shapeId){return}if(tooltext){tooltext=(0,_lib.parseUnsafeString)((0,_lib.parseTooltext)(tooltext,[1,2,3],{formattedValue:value,label:label},options))}else{tooltext=value?label+chartMarkerOpts.tooltipSepChar+value:label}if(value!==UNDEF&&value!==null){label=label+chartMarkerOpts.labelSepChar+value}else{if(!isNaN(itemScale)){if(itemScale<0){itemScale=0}else if(itemScale>5){itemScale=5}}else{itemScale=1}}(0,_lib.extend2)(options,{x:options.x&&options.x.toString(),y:options.y&&options.y.toString(),fillcolor:fillColor,fillalpha:fillAlpha,fillratio:fillRatio,fillangle:fillAngle,borderthickness:borderThickness,bordercolor:borderColor,borderalpha:borderAlpha,hovereffect:(0,_lib.pluck)(chartMarkerOpts.showHoverEffect),radius:radius&&radius.toString(),link:options.link,showshadow:(0,_lib.pluckNumber)(options.showshadow,markerConfig.shadow),_markerLabel:label,_markerId:options.id,id:(options.id+BLANK).toLowerCase()});delete options.tooltext;markerConfig.tooltext=chartMarkerOpts.showTooltip?tooltext:false;calcX=Number(options.x)*scalingParams.sFactor+scalingParams.translateX;calcY=Number(options.y)*scalingParams.sFactor+scalingParams.translateY;radius=options.radius;if(shapeId==="triangle"){(0,_lib.extend2)(options,{type:"polygon",sides:3,startangle:chartMarkerOpts.startAngle});type="polygon";sides=3}else if(shapeId==="diamond"){(0,_lib.extend2)(options,{type:"polygon",sides:4,startangle:chartMarkerOpts.startAngle});type="polygon";sides=4}else if(shapeId==="arc"){innerradius=radius*INNERRADIUSFACTOR;(0,_lib.extend2)(options,{type:"arc",startangle:0,endangle:360,innerradius:innerradius});type="arc"}else if(shapeId==="circle"){options.type="circle";type="circle"}else{shapeObj=dataset.getShapeArgs.call(marker);if(!chartMarkerOpts.dataEnabled||!chartMarkerOpts.valueToRadius||options.radius===UNDEF){!shapeObj.radius&&(shapeObj.radius=chartMarkerOpts.radius);shapeObj.radius*=itemScale*markerConfig.autoScale}else{delete shapeObj.radius}(0,_lib.extend2)(options,shapeObj);options.id=options._markerId&&options._markerId.toLowerCase();innerradius=shapeObj.innerradius;shapeObj.radius&&(radius=shapeObj.radius);type=shapeObj.type&&shapeObj.type.toLowerCase();sides=shapeObj.sides||5;radius=Number(radius);if(radius&&innerradius&&radius<innerradius){temp=radius;options.radius=radius=innerradius;options.innerradius=innerradius=temp}}options.type=options.type&&options.type.toLowerCase();(0,_lib.extend2)(options,{hoverfillcolor:(0,_lib.pluck)(options.fillhovercolor,chartMarkerOpts.hoverFillColor,options.fillcolor),hoverfillalpha:(0,_lib.pluck)(options.fillhoveralpha,chartMarkerOpts.hoverFillAlpha,options.fillalpha),hoverfillratio:(0,_lib.pluck)(options.fillhoverratio,chartMarkerOpts.hoverFillRatio,options.fillratio),hoverfillangle:(0,_lib.pluck)(options.fillhoverangle,chartMarkerOpts.hoverFillAngle,options.fillangle),hoverborderthickness:(0,_lib.pluckNumber)(options.borderhoverthickness,chartMarkerOpts.hoverBorderThickness,options.borderthickness),hoverbordercolor:(0,_lib.pluck)(options.borderhovercolor,chartMarkerOpts.hoverBorderColor,options.bordercolor),hoverborderalpha:(0,_lib.pluck)(options.borderhoveralpha,chartMarkerOpts.hoverBorderAlpha,options.borderalpha)});fillAttrs={alpha:options.fillalpha,color:options.fillcolor,angle:360-options.fillangle,ratio:options.fillratio};hoverFillAttrs={alpha:options.hoverfillalpha,color:options.hoverfillcolor,angle:360-options.hoverfillangle,ratio:options.hoverfillratio};options._defaultattrs={fill:(0,_lib.toRaphaelColor)(fillAttrs),"stroke-width":options.showborder!=="0"?options.borderthickness:0,stroke:(0,_libGraphics.convertColor)(options.bordercolor,options.borderalpha)};options._hoverattrs={fill:(0,_lib.toRaphaelColor)(hoverFillAttrs),"stroke-width":options.showborder!=="0"?options.hoverborderthickness:0,stroke:(0,_libGraphics.convertColor)(options.hoverbordercolor,options.hoverborderalpha)};if(options.type==="image"){options.borderthickness=options.borderthickness||0;options.onload=function(imageattr){var shape=this,options=shape.config,width=imageattr.width,height=imageattr.height,kdPoint={},calcX=(Number(options.x)-width/(2*scalingParams.sFactor))*scalingParams.sFactor,calcY=(Number(options.y)-height/(2*scalingParams.sFactor))*scalingParams.sFactor;kdPoint=kdArrayMap[markerId]||(kdArrayMap[markerId]={});kdPoint.x=calcX+scalingParams.translateX;kdPoint.y=calcY+scalingParams.translateY;kdPoint.element=marker;kdPoint.shapeInfo={type:"rect",width:width,height:height};if(width&&height){shape.getElement().attr({x:calcX,y:calcY,width:width,height:height})}dataset.imageLoadCount++;if(dataset.imageLoadCount===dataset.imageCount){dataset._buildKdTree()}};options.onerror=function(){dataset.imageLoadCount++;if(dataset.imageLoadCount===dataset.imageCount){dataset._buildKdTree()}};dataset.imageCount++}else{kdPoint=kdArrayMap[markerId]||(kdArrayMap[markerId]={});kdPoint.x=calcX;kdPoint.y=calcY;kdPoint.element=marker;kdPoint.shapeInfo={type:type,sides:sides,radius:Number(radius)+options.borderthickness/2,innerradius:innerradius}}markerConfig.drawOptions.shape=options;if(!chartMarkerOpts.showLabels){return{markerShape:options}}labelPadding=options.labelpadding||chartMarkerOpts.labelPadding;labelObj=dataset._getLabelOptions(labelPos,labelPadding,options);align=labelObj.align;valign=labelObj.valign;baseWidth=markerConfig._labelBaseWidth;baseHeight=markerConfig._labelBaseHeight;xOffset=markerConfig._labelXOffset;yOffset=markerConfig._labelYOffset;wrapWidth=chartMarkerOpts.labelWrapWidth?chartMarkerOpts.labelWrapWidth:dataset.getWrapWidth[align](baseWidth,Number(labelObj.x)+xOffset);wrapHeight=chartMarkerOpts.labelWrapHeight?chartMarkerOpts.labelWrapHeight:dataset.getWrapHeight[valign](baseHeight,Number(labelObj.y)+yOffset);if(wrapWidth>labelPadding){wrapWidth-=labelPadding}if(wrapHeight>labelPadding){wrapHeight-=labelPadding}if(align=="center"&&valign=="middle"){markerConfig.drawOptions.label=(0,_lib.extend2)({type:"text"},{text:label,tooltext:options.tooltext,x:labelObj.x,y:labelObj.y,align:align,valign:labelObj.valign,wrap:1,wrapwidth:wrapWidth,wrapheight:wrapHeight,fontsize:markerStyle.fontSize/scalingParams.sFactor,font:markerStyle.fontFamily,fillcolor:markerStyle.fontColor})}else{markerConfig.drawOptions.label=(0,_lib.extend2)({type:"text"},{text:label,tooltext:options.tooltext,x:labelObj.x,y:labelObj.y,align:align,valign:labelObj.valign,wrap:1,wrapwidth:wrapWidth,wrapheight:wrapHeight,fontsize:markerStyle.fontSize/scalingParams.sFactor,font:markerStyle.fontFamily,fillcolor:markerStyle.fontColor})}return{markerShape:options,markerLabel:markerConfig.drawOptions.label}};Markers.prototype.getHoverFn=function getHoverFn(){var dataset=this,chart=dataset.getFromEnv("chart");return function(){var element=this,marker=element.data("marker"),shape=marker.markerShape,options=shape.unfilteredConfig,eventArgs=options._markerEventArgs,wrapper=shape.getElement(),bounds=wrapper.getBBox(),attrs=void 0,fillObj=void 0,markerConfig=marker.config;if(wrapper&&options.hovereffect){if(shape.config.type==="circle"){fillObj={color:options.hoverfillcolor,alpha:options.hoverfillalpha,angle:360-options.hoverfillangle,ratio:options.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:shape.config.rawFillPattern==="radial"};options._hoverattrs.fill=(0,_lib.toRaphaelColor)(fillObj)}attrs=(0,_lib.extend2)({},options._hoverattrs);if(wrapper.type==="image"){delete attrs.fill;delete attrs.stroke;delete attrs["stroke-width"]}wrapper.attr(attrs)}if(!eventArgs){eventArgs=options._markerEventArgs={x:bounds.x,y:bounds.y,scaledX:bounds.x/shape.groupConfig.scaleX,scaledY:bounds.y/shape.groupConfig.scaleY,chartX:bounds.x+bounds.width/2,chartY:bounds.y+bounds.height/2,id:options.id,label:options.label}}(0,_eventApi.raiseEventGroup)(markerConfig.options.id,"markerRollOver",eventArgs,chart.getFromEnv("chartInstance"),markerConfig,UNDEF,UNDEF,UNDEF)}};Markers.prototype.getHoverOutFn=function getHoverOutFn(){var dataset=this,chart=dataset.getFromEnv("chart");return function(){var element=this,marker=element.data("marker"),shape=marker.markerShape,wrapper=shape.getElement(),markerConfig=marker.config,options=shape.unfilteredConfig,attrs=void 0;if(wrapper&&shape.unfilteredConfig.hovereffect){if(shape.config.type==="circle"){options._defaultattrs.fill=(0,_lib.toRaphaelColor)({alpha:shape.config.rawAlpha,color:shape.config.rawColor,angle:360-shape.config.rawAngle,ratio:shape.config.rawRatio,radialGradient:shape.config.rawFillPattern==="radial"})}attrs=(0,_lib.extend2)({},shape.unfilteredConfig._defaultattrs);if(wrapper.type==="image"){delete attrs.fill;delete attrs.stroke;delete attrs["stroke-width"]}wrapper.attr(attrs)}(0,_eventApi.raiseEventGroup)(markerConfig.id,"markerRollOut",shape.unfilteredConfig._markerEventArgs,chart.getFromEnv("chartInstance"),UNDEF,UNDEF,UNDEF)}};Markers.prototype.getClickFn=function getClickFn(){var dataset=this;return function(e){var element=this,marker=element.data("marker"),markerOptions=marker.config.options,chart=dataset.getFromEnv("chart"),shape=marker.markerShape,options=shape.config,bounds=element.getBBox(),eventArgs=options._markerEventArgs;if(!eventArgs){eventArgs=options._markerEventArgs={x:bounds.x,y:bounds.y,scaledX:bounds.x/shape.groupConfig.scaleX,scaledY:bounds.y/shape.groupConfig.scaleY,chartX:bounds.x+bounds.width/2,chartY:bounds.y+bounds.height/2,id:markerOptions.id,label:markerOptions.label}}chart.fireChartInstanceEvent("markerClick",eventArgs,e)}};Markers.prototype.highlightPoint=function highlightPoint(kdPoint){var marker=kdPoint.element,dataset=this,chart=dataset.getFromEnv("chart"),chartGraphics=chart.graphics,animationManager=dataset.getFromEnv("animationManager"),trackerElems=chartGraphics.trackerElems||(chartGraphics.trackerElems={}),shapeInfo=kdPoint.shapeInfo,toolTipController=dataset.getFromEnv("toolTipController"),type=void 0,trackerElement=void 0,x=kdPoint.x,y=kdPoint.y,hiddenAttr=void 0,sides=void 0,startAngle=void 0,width=void 0,radius=void 0,innerradius=void 0,height=void 0,endAngle=void 0,lastHoveredPoint=chart.config.lastHoveredPoint,newElem=false;if(kdPoint===false){type=lastHoveredPoint&&lastHoveredPoint.shapeInfo.type;trackerElement=trackerElems[type];trackerElement&&trackerElement.hide();chart.config.lastHoveredPoint=null;return}hiddenAttr={fill:TRACKER_FILL,stroke:TRACKER_FILL};type=shapeInfo.type;type==="circle"&&(type="polygon");trackerElement=trackerElems[type];if(type==="polygon"){sides=shapeInfo.sides||1;startAngle=shapeInfo.startAngle;radius=shapeInfo.radius;!trackerElement&&(newElem=true);trackerElement=chartGraphics.trackerElems[type]=animationManager.setAnimation({el:chartGraphics.trackerElems[type]||"polypath",container:trackerElement,attr:Object.assign({polypath:[sides,x,y,radius,startAngle]},hiddenAttr),component:dataset,label:"markers"})}else if(type==="rect"){width=shapeInfo.width;height=shapeInfo.height;!trackerElement&&(newElem=true);trackerElement=chartGraphics.trackerElems[type]=animationManager.setAnimation({el:chartGraphics.trackerElems[type]||"rect",container:trackerElement,attr:Object.assign({x:x,y:y,width:width,height:height},hiddenAttr),component:dataset,label:"markers"})}else if(type==="arc"){innerradius=marker.markerShape.config.innerRadius;startAngle=(360-marker.markerShape.config.startAngle)*deg2rad;endAngle=(360-marker.markerShape.config.endAngle)*deg2rad;radius=shapeInfo.radius;!trackerElement&&(newElem=true);trackerElement=chartGraphics.trackerElems[type]=animationManager.setAnimation({el:chartGraphics.trackerElems[type]||"ringpath",container:trackerElement,attr:Object.assign({ringpath:[x,y,radius,innerradius,endAngle,startAngle]},hiddenAttr),component:dataset,label:"markers"})}chart.config.lastHoveredPoint=kdPoint;if(newElem){trackerElement.click(dataset.getClickFn()).hover(dataset.getHoverFn(),dataset.getHoverOutFn())}trackerElement.show().data("marker",marker);toolTipController.enableToolTip(trackerElement,marker.config.tooltext)};Markers.prototype._drawConnectors=function _drawConnectors(){var dataset=this,chart=dataset.getFromEnv("chart"),annConfig=chart.config.annotationConfig,datasetComponents=dataset.components,connectors=datasetComponents.connectors||(dataset.components.connectors=[]),connector=void 0,length=connectors.length,scalingParams=chart.config.scalingParams,chartConnOptions=chart.config.connectorOpts,showConnectorLabels=chartConnOptions.showLabels,annotations=chart.getChildren("mapAnnotations")[0],i=void 0,connectorOptions=[],connectorLabelItems=[],x=void 0,y=void 0,toX=void 0,toY=void 0,fromMarkerConfig=void 0,toMarkerConfig=void 0,groups=[];groups.push({id:"connectorLabels",fillalpha:"100",items:connectorLabelItems});groups.push({id:"connectors",fillalpha:"100",items:connectorOptions});annotations.addGroup(Object.assign(annConfig,groups[1]),dataset);annotations.addGroup(Object.assign(annConfig,groups[0]),dataset);for(i=0;i<length;i++){if(!connectors[i]){continue}fromMarkerConfig=connectors[i].config.fromMarker.config;toMarkerConfig=connectors[i].config.toMarker.config;x=fromMarkerConfig.options.x;y=fromMarkerConfig.options.y;toX=toMarkerConfig.options.x;toY=toMarkerConfig.options.y;connectors[i].config.x=x;connectors[i].config.y=y;connectors[i].config.tox=toX;connectors[i].config.toy=toY;connectorOptions.push(connectors[i].config);connector=annotations.addItem("connectors",Object.assign({animationLabel:"markerItem"},connectors[i].config),true,dataset);connector.addEventListener("mouseover",connectors[i].config.onmouseover);connector.addEventListener("mouseout",connectors[i].config.onmouseout);connector.addEventListener("click",connectors[i].config.onclick);if(connectors[i].labelConfig&&showConnectorLabels){connectors[i].labelConfig.x=((Number(x)+Number(toX))/2).toString();connectors[i].labelConfig.y=((Number(y)+Number(toY))/2).toString();connectors[i].labelConfig.fontsize=chartConnOptions.fontSize/(scalingParams.scaleFactor*chart.config.baseScaleFactor);connectorLabelItems.push(connectors[i].labelConfig);annotations.addItem("connectorLabels",Object.assign({animationLabel:"markerItem"},connectors[i].labelConfig),true,dataset)}}};Markers.prototype.getShapeArgs=function getShapeArgs(){var mark=this,config=mark.config,shapeObj=(0,_lib.extend2)({},mark.shapeObj),radius=void 0;config.autoScale=1;if(shapeObj){if(shapeObj.type==="polygon"){if(shapeObj.sides<3){shapeObj.type="circle"}else{shapeObj.startangle=config.startAngle}}else if(shapeObj.type==="arc"){radius=(shapeObj.radius||config.markerRadius)*config.autoScale;shapeObj.radius=radius;shapeObj.innerradius=shapeObj.innerradius&&shapeObj.innerradius*config.autoScale||radius*INNERRADIUSFACTOR}return shapeObj}else{return null}};Markers.prototype._getLabelOptions=function _getLabelOptions(labelPos,labelPadding,options,width,height){var dataset=this,radius=void 0,x=void 0,y=void 0,alignment=labelPos&&labelPos.toLowerCase();if(!dataset.getLabelAlignment[alignment]){alignment="center"}x=Number(options.x);y=Number(options.y);if(width===UNDEF||height===UNDEF){radius=options.radius||0}else{radius=/^(top|bottom)$/gi.test(alignment)&&height*.5||/^(left|right)$/gi.test(alignment)&&width*.5||0}radius=Number(radius)+Number(labelPadding);return dataset.getLabelAlignment[alignment](x,y,radius)};Markers.prototype.addMarkerItem=function addMarkerItem(options){var markers=this,chart=markers.getFromEnv("chart"),item=options,markerObj=void 0,items=markers.components.markerObjs,shapeObjs=markers.components.shapeObjs,markerGroup=markers.components.markerGroup,markerLabelGroup=markers.components.markerLabelGroup,annotations=chart.getChildren("mapAnnotations")[0],numberFormatter=markers.getFromEnv("number-formatter"),markerOptions=chart.config.markerOpts,drawOptions=void 0,markerConfig=void 0,value=void 0,shapeId=void 0,id=void 0;if(id=item.id.toLowerCase()){if(items[id]){return}delete item.value;markers.imageLoadCount=0;markerObj=Markers._initializeMarkerItem(id,item,null);markerObj.dataset=markers;shapeId=markerObj.config.options.shapeid;markerConfig=markerObj.config;value=item.value;markerConfig.cleanValue=numberFormatter.getCleanValue(value);options=markerConfig.options;if(markerConfig.cleanValue!==null){markerConfig.formattedValue=numberFormatter.dataLabels(value)}else{markerConfig.formattedValue=UNDEF}markerConfig.fillColor=(0,_lib.pluck)(options.fillcolor,options.color,markerOptions.fillColor);markerConfig.fillAlpha=(0,_lib.pluck)(options.fillalpha,options.alpha,markerOptions.fillAlpha);markerConfig.fillRatio=(0,_lib.pluck)(options.fillratio,markerOptions.fillRatio);markerConfig.fillAngle=(0,_lib.pluck)(options.fillangle,markerOptions.fillAngle);markerConfig.borderThickness=(0,_lib.pluckNumber)(options.borderthickness,markerOptions.borderThickness);markerConfig.borderColor=(0,_lib.pluck)(options.bordercolor,markerOptions.borderColor);markerConfig.borderAlpha=(0,_lib.pluck)(options.borderalpha,markerOptions.borderAlpha);markerConfig.labelPadding=options.labelpadding||markerOptions.labelPadding;markerConfig.options.tooltext=(0,_lib.pluck)(options.tooltext,markerOptions.tooltext);markerConfig.link=options.link;if(shapeId){markerObj.shapeObj=shapeObjs[shapeId&&shapeId.toLowerCase()]}items[id]=markerObj;drawOptions=markers._drawMarkerItem.call(markerObj);if(markerGroup&&markerLabelGroup){markerObj.markerShape=drawOptions.markerShape&&annotations.addItem(markerGroup.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},drawOptions.markerShape),true,markers);markerObj.markerLabel=drawOptions.markerLabel&&annotations.addItem(markerLabelGroup.getId(),Object.assign({animationLabel:"markerItem"},drawOptions.markerLabel),true,markers)}markers._buildKdTree()}};Markers.prototype.updateMarkerItem=function updateMarkerItem(id,options){var markers=this,chart=markers.getFromEnv("chart"),annotations=chart.getChildren("mapAnnotations")[0],markerObjs=markers.components.markerObjs,markerOptions=chart.config.markerOpts,origOptions=void 0,key=void 0,markerConfig=void 0,optConfig={},marker=markerObjs[id],annotOptions=void 0;if(marker){origOptions=marker.config.options;(0,_lib.extend2)(origOptions,options);markers.imageLoadCount=0;markerConfig=marker.config;for(key in options){optConfig[key.toLowerCase()]=options[key]&&options[key].toString()}markerConfig.fillColor=(0,_lib.pluck)(optConfig.fillcolor,optConfig.color,markerOptions.fillColor);markerConfig.fillAlpha=(0,_lib.pluck)(optConfig.fillalpha,optConfig.alpha,markerOptions.fillAlpha);markerConfig.fillRatio=(0,_lib.pluck)(optConfig.fillratio,markerOptions.fillRatio);markerConfig.fillAngle=(0,_lib.pluck)(optConfig.fillangle,markerOptions.fillAngle);markerConfig.borderThickness=(0,_lib.pluckNumber)(optConfig.borderthickness,markerOptions.borderThickness);markerConfig.borderColor=(0,_lib.pluck)(optConfig.bordercolor,markerOptions.borderColor);markerConfig.borderAlpha=(0,_lib.pluck)(optConfig.borderalpha,markerOptions.borderAlpha);markerConfig.labelPadding=optConfig.labelpadding||markerOptions.labelPadding;markerConfig.options.tooltext=(0,_lib.pluck)(optConfig.tooltext,markerOptions.tooltext);markerConfig.link=optConfig.link;annotOptions=markers._drawMarkerItem.call(marker).markerShape;markers._buildKdTree();annotations.update(id,annotOptions)}};Markers.prototype._removeMarkerItem=function _removeMarkerItem(id){var markers=this,components=markers.components,markerObjs=components.markerObjs,markerObj=markerObjs[id],kdArrayMap=components.kdArrayMap,markerShape=void 0,markerLabel=void 0;if(markerObj){markerShape=markerObj.markerShape;markerLabel=markerObj.markerLabel;markerShape&&markerShape.dispose();markerLabel&&markerLabel.dispose();delete kdArrayMap[id];markers._buildKdTree()}delete markerObjs[id]};Markers.prototype.getElement=function getElement(point){var datasetObj=this;if(datasetObj.components.kDTree){return datasetObj.components.kDTree.getNeighbour(point)}};return Markers}(_entities2["default"]);exports["default"]=Markers},721:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _componentInterface=__webpack_require__(131);var _componentInterface2=_interopRequireDefault(_componentInterface);var _lib=__webpack_require__(118);var _dependencyManager=__webpack_require__(125);var _mapEntitiesAnimation=__webpack_require__(719);var _mapEntitiesAnimation2=_interopRequireDefault(_mapEntitiesAnimation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _defaults(obj,defaults){var keys=Object.getOwnPropertyNames(defaults);for(var i=0;i<keys.length;i++){var key=keys[i];var value=Object.getOwnPropertyDescriptor(defaults,key);if(value&&value.configurable&&obj[key]===undefined){Object.defineProperty(obj,key,value)}}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass)}(0,_dependencyManager.addDep)({name:"mapsAnimation",type:"animationRule",extension:_mapEntitiesAnimation2["default"]});var MapGroup=function(_ComponentInterface){_inherits(MapGroup,_ComponentInterface);function MapGroup(){_classCallCheck(this,MapGroup);return _possibleConstructorReturn(this,_ComponentInterface.apply(this,arguments))}MapGroup.prototype.getType=function getType(){return"group"};MapGroup.prototype.getName=function getName(){return"mapGroup"};MapGroup.prototype.configure=function configure(){var manager=this;manager._mapChildren(function(child){child.configure&&child.configure()})};MapGroup.prototype.createContainer=function createContainer(){var manager=this,parent=manager.getLinkedParent(),animationManager=manager.getFromEnv("animationManager"),pContainer=void 0,parentChildContainers=parent.getChildContainer();pContainer=parentChildContainers.plotGroup;!manager.getChildContainer("plotShadow")&&manager.addChildContainer("plotShadow",animationManager.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:pContainer,component:manager,label:"group"}));!manager.getChildContainer("plot")&&manager.addChildContainer("plot",animationManager.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:pContainer,component:manager,label:"group"}))};MapGroup.prototype._transformGroup=function _transformGroup(){var manager=this,chart=this.getFromEnv("chart"),chartInstance=chart.getFromEnv("chartInstance"),animationManager=manager.getFromEnv("animationManager"),jsonData=chart.jsonData,plotGroup=manager.getChildContainer("plot"),plotShadowGroup=manager.getChildContainer("plotShadow"),scalingParams=chart.config.scalingParams,transformGroup=function transformGroup(){return function(event){event.detachHandler();if(_lib.hasSVG){if(chartInstance.args.link&&chartInstance.args.clickedEntityBox&&jsonData.chart.linkedcharttransition==="scale"){plotGroup&&animationManager.setAnimation({el:plotGroup,attr:{transform:scalingParams.transformStr},component:manager,label:"group"});plotShadowGroup&&animationManager.setAnimation({el:plotShadowGroup,attr:{transform:scalingParams.transformStr},component:manager,label:"group"})}else{plotGroup&&animationManager.setAnimation({el:plotGroup,attr:{transform:scalingParams.transformStr},component:manager,label:"group"});plotShadowGroup&&animationManager.setAnimation({el:plotShadowGroup,attr:{transform:scalingParams.transformStr},component:manager,label:"group"})}}plotGroup.show();plotShadowGroup.show()}};plotGroup.hide();plotShadowGroup.hide();chart.config.entitiesReady=false;chartInstance.addEventListener("internal.mapdrawingcomplete",transformGroup());chart.checkComplete()};MapGroup.prototype.draw=function draw(){this.createContainer();this._transformGroup()};MapGroup.prototype.getDataLimits=function getDataLimits(allVisible){var manager=this,min=+Infinity,max=-Infinity,maxminObj=void 0,numOfColumns=0,getMaxMin=function getMaxMin(_maxminObj){max=Math.max(max,_maxminObj.max);min=Math.min(min,_maxminObj.min)};manager._mapChildren(function(child){if(child.getState("removed")||child.getState("visible")===false){if(allVisible){maxminObj=child.getDataLimits(allVisible);getMaxMin(maxminObj)}return}numOfColumns++;maxminObj=child.getDataLimits(allVisible);getMaxMin(maxminObj)});if(!numOfColumns){manager.setState("visible",false)}else{manager.setState("visible",true)}if(!this.config.range){this.config.range={};this.config.range.min=this.config.dataMin;this.config.range.max=this.config.dataMax}return{max:max,min:min}};return MapGroup}(_componentInterface2["default"]);exports["default"]=MapGroup}}])});
//# sourceMappingURL=http://localhost:3052/3.13.1/map/eval/fusioncharts.maps.js.map